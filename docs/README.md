# 蓝牙终端可连接API


|    时间    | 备注                                                         |
| :--------: | :----------------------------------------------------------- |
| 2022.04.13 | 对该版本之前的所有版本进行整理，形成此文档                   |
| 2022.04.16 | 增加标签终端配置协议(0x3D)，添加声光报警器配置               |
| 2022.07.07 | 1.添加功能开关协议<br />2.修改短消息协议，增加标题设置功能   |
| 2022.08.03 | 1.增加NB上报参数配置<br />2.增加GPS参数配置<br />3.完善蓝牙扫描参数配置 |
| 2022.08.06 | 增加蓝牙广播类型配置                                         |

1. 本协议文档可能不是最新版本；
2. 本协议文档描述，吾控健康蓝牙终端设备API接口相关协议；
3. 开发者若需要硬件对接请联系销售人员,  https://www.imyfit.com ；
4. 若协议文档有更新，不再另行通知，强烈建议开发者到 https://imyfit.gitee.io 获取在线最新协议；
5. 若对协议不理解或发现协议有bug请到issues区域提出（或者提交一个 pull request），愿我们的付出对您的开发事半功倍。



## 概述

### 蓝牙服务
终端通信中用到的蓝牙服务如下表，服务为标准蓝牙服务，可对接Android、IOS与具有标准蓝牙的嵌入式平板/笔记本等。服务0xFFF0用于数据通信，协议的大部分数据都是通过该服务进行的。服务0x180D用于实时心率传输数据。

服务UUID：0xFFF0

| 特征值 | 可执行操作 | 备注                               |
| ------ | ---------- | ---------------------------------- |
| 0xFFF1 | notify     | 接收终端数据(必须保证notify被使能) |
| 0xFFF2 | write      | 向终端发送数据                     |

服务UUID：0x180D

| 特征值 | 可执行操作 | 备注                               |
| ------ | ---------- | ---------------------------------- |
| 0x2A37 | notify     | 接收心率数据(必须保证notify被使能) |
| 0x2A38 | notify     |                                    |


### 通信协议

协议规定蓝牙主机与终端从机0xFFFF服务通信协议中所有非单字节类型的数据，除特殊说明外均为**小端序**。主机接收端数据需要做数据**拼包**处理，否则可能出现接收不全问题。   

协议帧定义

| 包头  (1B) | 功能码   (1B) | 载荷长度  (2B) | 载荷实体  (n*B) | 校验码  (1B) | 包尾  (1B) |
| :--------: | :-----------: | :------------: | :-------------: | :----------: | :--------: |
|    0x68    |       …       |       …        |        …        |      …       |    0x16    |

1. **包头**，固定0x68。

2. **功能码**，各部分位含义如下表。部分功能码可能与该定义冲突，以实际为准。详细的功能码（也称为：功能码、功能协议）在后文详细阐述。

   功能码域

   | 7bit                                             | 6bit                           | [5:0]bit |
   | ------------------------------------------------ | ------------------------------ | -------- |
   | 表示方向：  0是手机向手环发送  1是手环向手机发送 | 表示异常位：  0是正常  1是异常 | 帧类型   |

   如果终端回复的功能码是异常码，则载荷实体会有异常参数（一个字节），如下表。

   异常码域（载荷实体）

   | 错误编码 | 编码含义                     |
   | :------: | ---------------------------- |
   |   0x01   | 校验错误                     |
   |   0x02   | 内容错误，内容的值不合理     |
   |   0x03   | 无此项数据（没有此项功能码） |
   |   0X04   | 设备当前不支持该帧的功能     |

3. **载荷长度**，为两个字节，低字节在前，表征**内容数据**域的字节长度。

4. **载荷实体**，具体的数据交互内容，在后文详细阐述。

5. **校验码**，将包头、功能码、载荷长度、内容数据所有字节进行相加取低1个字节。

6. **包尾**，固定0x16。

### 数据包超时重传策略

为保证通信的可靠和稳定性，必须要建立可靠的重传机制。通信的一方在信道空闲时，发送请求命令或者数据，若信道忙，则要等待信道空闲后，再发送请求或者数据，或者要抢占空闲信道间隙。 当通信的一方发送完请求帧后，若一段时间内没收到回应时，须重传该请求帧。一般重传3次即可，重传间隔在500ms ~ 1000ms左右即可。



## 功能码

该章节内容主要描述1.2章节的功能码（也称为：功能码、功能协议）取不同的值，从而实现不同的功能。

### 0x01-来电提醒

> 仅需要在 Android App上实现该协议， IOS App无需实现该协议

表1来电参数如下，参数顺序不能更改，均为纯HEX表示的数字。

| 类型 | 字节长度                       | 说明                                                         |
| :--: | :----------------------------- | ------------------------------------------------------------ |
| 类型 | 1                              | 0x00表示开始提醒；<br />0x01表示结束提醒                     |
| 号码 | 15                             | 电话号码使用ASCII码，字节位不足时，在后面补0x00;<br />如果是结束提醒，则不发送这一部分 |
| 姓名 | 不定长，最大不可以超过32个字节 | 呼叫者的姓名，如果通信录上有该呼叫者，以UTF-8编码发送姓名; <br />如果通信录没有或结束提醒，则不发送这一部分。 |

APP请求

|    域    | 数据 | 长度 | 说明              |
| :------: | :--: | :--: | ----------------- |
|   包头   | 0x68 |  1   |                   |
|  功能码  | 0x01 |  1   |                   |
| 载荷长度 | 16+n |  2   | 低字节先传        |
| 载荷实体 |  XX  | 16+n | 具体说明 见上表 1 |
|  校验码  |  CS  |  1   |                   |
|   包尾   | 0x16 |  1   |                   |

终端应答

|    域    | 数据 | 长度 | 说明       |
| :------: | :--: | :--: | ---------- |
|   包头   | 0x68 |  1   |            |
|  功能码  | 0x81 |  1   |            |
| 载荷长度 |  0   |  2   | 低字节先传 |
|  校验码  |  CS  |  1   |            |
|   包尾   | 0x16 |  1   |            |

```
例如：电话号码是13656898745，姓名“张三”，则APP需要向终端发送：
68  01  1600 00 313336353638393837343500000000 E5BCA0E4B889 33  16
终端如果成功执行提醒功能，则返回：
68 81 0000 E9 16
否则：
68 C1 0000 29 16 
如果用户在手机端操作电话（接听或者挂断），则APP需要发送命令以关闭手环提醒：
68  01 0100 01 6B 16
```



###  0x02-参数读取与设置

表2终端参数表

| 编号 | 内容                          | 大小 | 备注                                                         |
| ---- | ----------------------------- | ---- | ------------------------------------------------------------ |
| 0x00 | 12/24小时制                   | 1B   | 0x00:12小时制；0x01:24小时制                                 |
| 0x01 | 公制/英制                     | 1B   | 0x00:公制；0x01:英制                                         |
| 0x02 | 心率监控间隔                  | 1B   | 单位分钟：最小值5分钟，最大值60分钟；<br />若为0X01, 表示连续心率监测(注：目前大部分设备不支持连续心率监测） |
| 0x03 | 疲劳度监控开关                | 1B   | 0x00：关闭；0x01：开启                                       |
| 0x04 | 心率自动监控开关              | 1B   | 0x00：关闭；0x01：开启                                       |
| 0x05 | 日期显示格式                  | 1B   | 0x00: 月：日；0x01: 日：月                                   |
| 0x06 | 手环语言版本                  | 1B   | 0x00 : 中文 ; 0x01：英文 ;0x03：繁体中文                     |
| 0x07 | 血氧连续监测频率              | 1B   | 单位分钟：最小值5分钟，仅支持设置 5，10，15，20，30          |
| 0x08 | 血氧连续监测开关              | 1B   | 0x00:关闭；0x01:开启                                         |
| 0x09 | 诊断连续监测频率(未使用,保留) | 1B   | 单位分钟：最小值5分钟，仅支持设置 5，10，15，20，30          |
| 0x0A | 诊断连续监测开关(未使用,保留) | 1B   | 0x00:关闭；0x01:开启                                         |
| 0x0B | 血压连续监测频率              | 1B   | 单位分钟：最小值5分钟，仅支持设置 5，10，15，20，30          |
| 0x0C | 血压连续监测开关              | 1B   | 0x00:关闭；0x01:开启                                         |
| 0x0D | 服务器配置                    | 48B  | MQTT服务器主机IP（支持域名）ASCII编码，<br />例如：需要设置MQTT Broker服务器地址114.116.23.249，<br />则发送数据3131342E3131362E32332E323439...[00补齐] |
| 0x0E | 端口配置                      | 2B   | MQTT服务器端口 整数 低字节在前                                      |
| 0x0F | clientID配置                  | 40B  | MQTT客户端ID ASCII编码                                         |
| 0x10 | qos配置                       | 1B   | MQTT消息等级设置, 整数 0~2                                  |
| 0x11 | 用户名                        | 48B  | MQTT用户名设置 ASCII编码                                       |
| 0x12 | 密码                          | 48B  | MQTT密码设置 ASCII编码                                         |
| 0x13 | 订阅主题                      | 48B  | MQTT订阅主题设置 ASCII编码                                     |
| 0x14 | 发布主题                      | 48B  | MQTT发布主题设置 ASCII编码                                     |
| 0x15 | 室内室外状态切换              | 1B   | 室内室外状态切换  0x00: 关闭切换功能；0x01: 开启切换功能；0xFF: 未知状态 |
| 0x16 | 心率预警范围                  | 2B   | [0]:最小心率，[1]:最大心率                                   |
| 0x17 | 心率预警开关                  | 1B   | 0x00:关闭；0x01:开启                                         |
| 0x18 | 血氧预警范围                  | 2B   | [0]:最小饱和度，[1]:最大饱和度                               |
| 0x19 | 血氧预警开关 | 1B   | 0x00:关闭；0x01:开启                                          |
| 0x1A | 血压预警范围 | 4B   | [0]:最小收缩压，[1]:最大收缩压  [2]:最小舒张压，[3]:最大舒张压 |
| 0x1B | 血压预警开关 | 1B   | 0x00:关闭；0x01:开启                                          |
| 0x1C | 温度预警范围 | 4B   | [1~0]:最小温度(X100)(LSB)  [3~2]:最大温度(X100)(LSB)         |
| 0x1D | 温度预警开关 | 1B   | 0x00:关闭；0x01:开启                                          |
| 0x1E | 气压预警范围 | 4B   | [1~0]:最小气压(hPa)(LSB)  [3~2]:最大气压(hPa)(LSB)           |
| 0x1F | 气压预警开关 | 1B   | 0x00:关闭；0x01:开启                                          |
| 0x20 | 跌倒预警模式 | 1B   | 0 一般，1 严格，2 老年                                       |
| 0x21 | 跌倒预警开关 | 1B   | 0x00:关闭；0x01:开启                                          |
| 0x22 | HRV连续监测频率 | 1B | 单位分钟：最小值5分钟，仅支持设置 5，10，15，20，30 |
| 0x23 | HRV连续监测开关 | 1B | 0x00:关闭 0x01:开启 |
| 0x24 | 计步开关 | 1B | 0x00:关闭 0x01:开启【仅R9C支持】 |
| 0x25 | 体温监测开关 | 1B | 0x00:关闭 0x01:开启【仅R9C支持】 |
| 0x26 | 体温监测频率 | 1B | 单位分钟：最小值5分钟，仅支持设置 5，10，15，20，30【仅R9C支持】 |
| 0x27 | 广播类型 | 1B | 最高位1表示特殊广播类型 0x80 表示核芯互联AOA广播<br />最高位0表示WK广播 bit[0:6]表示版本号 |
| 0x80 | 蓝牙主机扫描设置 | 24B | 具体内容参考：蓝牙主机扫描设置参数表 |
| 0x81 | 蓝牙主机扫描设定围栏 | 38B | 具体内容参考：蓝牙围栏设置参数表 |
| 0x82 | GPS定位设置 | 34B | 具体内容参考：GPS定位设置参数表 |
| 0x83 | NB上报频率设置 | 41B | 具体内容参考：NB上报频率设置参数表 |
| 0x84 | 广播间隔时间设置 | 3B | 运动广播间隔+静止广播间隔+SOS广播间隔***\*默认33,100,33\****单位10ms |

**备注：**

**1. 0x80表示多字节参数设置，即bit7为1的表示该参数有多个字节数据**

**2. 多字节参数只能一次设置一个**

NB上报频率设置参数表：

| 功能字段       | 大小 | 说明                                                         |
| -------------- | ---- | ------------------------------------------------------------ |
| NB上报频率     | 1B   | 单位分钟 **CAT1设备默认10，NB设备默认5**                     |
| 不佩戴上报频率 | 1B   | 单位分钟 **CAT1设备默认20，NB设备默认10**                    |
| 睡眠上报频率   | 1B   | 单位分钟 **CAT1设备默认60，NB设备默认30**                    |
| 不佩戴夜间频率 | 1B   | 单位分钟 **CAT1设备默认120，NB设备默认60**                   |
| 预留备用       | 6B   | 0                                                            |
| 低电量上报频率 | 10B  | 可以设置5组，每组2B 表示低于此电量则使用此频率上报 下发数据递增排列。<br />例如0x14 0x0F 0x1E 0x0A表示<br />1. 低于20%则15分钟上报一次<br />2. 低于%30大于%20则10分钟上报一次 **默认0** |
| 关闭时段控制   | 20B  | 2B一组，可设置10组时间段，例如0x04 0x05 0x08 0x09表示4点到5点，8点到9点都关闭NB上报 |
| 功能标记       | 1B   | 0x80下发存储标记，否则重启后使用默认配置                     |

 蓝牙主机扫描设置参数表：

| 功能         | 大小 | 说明                                                         |
| ------------ | ---- | ------------------------------------------------------------ |
| 扫描开关     | 1B   | 0x00：关闭   0x01：开启                                      |
| 围栏开关     | 1B   | 用一个字节表示7个围栏的开关状态                              |
| 扫描功能标记 | 4B   | 32位整数，低字节在前<br />0x00000001上报扫描数据<br />0x00000002扫描结束立即上传数据<br />0x00000004只扫描beacon设备<br />0x00000008 只扫描我司设备b6,b7,b8<br />0x00000010 只扫描特定设备，filter_name过滤<br />0x00000020 只扫描一定范围内的设备 filter_rssi过滤<br />0x00000040 特定围栏，匹配filter_name则触发围栏<br />0x00000080 校时标记[仅支持我司网关校时]<br />0x00000100 扫描For围栏<br />0x80000000 下发存储标记【用于收到后是否存储】<br /> |
| 扫描周期     | 2B   | 16位整数 低字节在前扫描周期 单位秒 范围10-3600，**默认300**  |
| 确认扫描周期 | 1B   | 用于状态切换后确认状态的扫描周期 单位秒 范围 5-255，**默认5** |
| 扫描超时时间 | 2B   | 16位整数 低字节在前一次扫描超时时间 单位毫秒 范围10-5000，**默认500** |
| 设备名称过滤 | 10B  | 只扫描匹配该名称设备，最长10字符，**默认为0**                |
| RSSI过滤     | 1B   | 只处理信号值大于该值的设备，**默认0xff**                     |
| 判定进入围栏 | 1B   | 判定在围栏内的扫描周期数 范围1-10 **默认2**                  |
| 判定离开围栏 | 1B   | 判定离开围栏的扫描周期数 范围1-10 **默认2**                  |

 

蓝牙围栏设置参数表：

| 功能字段     | 大小 | 说明                                                         |
| ------------ | ---- | ------------------------------------------------------------ |
| 围栏编号     | 1B   | 编号范围1-7                                                  |
| 围栏功能     | 1B   | 0x01 进入围栏关闭NB，离开则开启【根据设置】<br />0x02 上报进入围栏事件<br />0x04 上报离开围栏事件<br />0x08 进入围栏关闭GPS，离开则开启【根据设置】 |
| 围栏设备数量 | 1B   | 范围0-5                                                      |
| 围栏设备     | 5*7  | MAC地址+匹配长度                                             |

 

GPS定位设置参数表：

| 功能字段         | 大小 | 说明                                                         |
| ---------------- | ---- | ------------------------------------------------------------ |
| 定位类型type     | 1B   | 0单次定位 1多次定位 2连续定位[10s定位一次] 3关闭定位         |
| 定位频率         | 1B   | 单位分钟 范围1-255，**默认5**                                |
| 定位次数         | 1B   | 0xff表示一直定位                                             |
| 定位开始时间     | 4B   | 32位时间戳【北京时间】低字节在前                             |
| 定位结束时间     | 4B   | 32位时间戳【北京时间】低字节在前 <br />**开始结束时间都为0表示一直定位** |
| 功能标记         | 1B   | 0x01:定位完成立即上报<br />0x02:缓存等待NB定时上报<br />0x04:缓存区满了立即上报<br />0x08:使用NB上报频率<br />0x10:睡眠状态下不开启定位<br />0x80:下发数据保存标记 |
| 定位超时时间     | 1B   | 单位秒 范围10-255，**默认120**                               |
| 信号差超时时间   | 1B   | 单位秒 范围10-255，**默认30**                                |
| 定位成功延时时间 | 1B   | 用于过滤定位数据 单位秒 范围10-60，**默认10**                |
| GPS关闭时间段    | 20B  | 2B一组，可设置10组时间段，例如0x04 0x05 0x08 0x09表示4点到5点，8点到9点不开启GPS |

**1.APP读取参数**

APP请求

|    域    | 数据 | 长度 | 说明              |
| :------: | :--: | :--: | ----------------- |
|   包头   | 0x68 |  1   |                   |
|  功能码  | 0x02 |  1   |                   |
| 载荷长度 | 1+n  |  2   | 低字节先传        |
| 载荷实体 |  XX  | 1+n  | 读取指令：0x00    |
|          |      |      | 编号0，请参考表 2 |
|          |      |      | 编号1，请参考表 2 |
|          |      |      | …                 |
|  校验码  |  CS  |  1   |                   |
|   包尾   | 0x16 |  1   |                   |

终端应答

|    域    | 数据 | 长度 | 说明             |
| :------: | :--: | :--: | ---------------- |
|   包头   | 0x68 |  1   |                  |
|  功能码  | 0x82 |  1   |                  |
| 载荷长度 | 1+n  |  2   | 低字节先传       |
| 载荷实体 |  XX  | 1+n  | 读取指令：0x00   |
|          |      |      | 编号0 + 内容表 2 |
|          |      |      | 编号1 + 内容表 2 |
|          |      |      | …                |
|  校验码  |  CS  |  1   |                  |
|   包尾   | 0x16 |  1   |                  |

**2.APP设置参数**

APP请求

|    域    | 数据 | 长度 | 说明            |
| :------: | :--: | :--: | --------------- |
|   包头   | 0x68 |  1   |                 |
|  功能码  | 0x02 |  1   |                 |
| 载荷长度 | 1+n  |  2   | 低字节先传      |
| 载荷实体 |  XX  | 1+n  | 设置指令：0x01  |
|          |      |      | 编号0 + 内容表2 |
|          |      |      | 编号1 + 内容表2 |
|          |      |      | …               |
|  校验码  |  CS  |  1   |                 |
|   包尾   | 0x16 |  1   |                 |

终端应答

|    域    | 数据 | 长度 | 说明                                |
| :------: | :--: | :--: | ----------------------------------- |
|   包头   | 0x68 |  1   |                                     |
|  功能码  | 0x82 |  1   |                                     |
| 载荷长度 | 1+n  |  2   | 低字节先传                          |
| 载荷实体 |  XX  | 1+n  | 设置指令：0x01                      |
|          |      |      | 编号0 + 1B 结果(0x00 成功,其它失败) |
|          |      |      | 编号1 + 1B 结果(0x00 成功,其它失败) |
|          |      |      | …                                   |
|  校验码  |  CS  |  1   |                                     |
|   包尾   | 0x16 |  1   |                                     |

**注意：MQTT设置一次只能设置一项参数。**



### 0x03-获取电量

APP请求

|    域    | 数据 | 长度 | 说明       |
| :------: | :--: | :--: | ---------- |
|   包头   | 0x68 |  1   |            |
|  功能码  | 0x03 |  1   |            |
| 载荷长度 |  0   |  2   | 低字节先传 |
|  校验码  |  CS  |  1   |            |
|   包尾   | 0x16 |  1   |            |

终端应答

|    域    | 数据 | 长度 | 说明            |
| :------: | :--: | :--: | --------------- |
|   包头   | 0x68 |  1   |                 |
|  功能码  | 0x83 |  1   |                 |
| 载荷长度 |  1   |  2   | 低字节先传      |
| 载荷实体 |  XX  |  1   | 电池电量：0-100 |
|  校验码  |  CS  |  1   |                 |
|   包尾   | 0x16 |  1   |                 |

### 0x04-设置用户参数

APP请求

|    域    | 数据 | 长度 | 说明                       |
| :------: | :--: | :--: | -------------------------- |
|   包头   | 0x68 |  1   |                            |
|  功能码  | 0x04 |  1   |                            |
| 载荷长度 |  4   |  2   | 低字节先传                 |
| 载荷实体 |  XX  |  4   | 1B：身高，单位厘米         |
|          |      |      | 1B：体重，单位千克         |
|          |      |      | 1B：性别，0：男性，1：女性 |
|          |      |      | 1B：年龄，单位周岁         |
|  校验码  |  CS  |  1   |                            |
|   包尾   | 0x16 |  1   |                            |

终端应答

|    域    | 数据 | 长度 | 说明       |
| :------: | :--: | :--: | ---------- |
|   包头   | 0x68 |  1   |            |
|  功能码  | 0x84 |  1   |            |
| 载荷长度 |  1   |  2   | 低字节先传 |
|  校验码  |  CS  |  1   |            |
|   包尾   | 0x16 |  1   |            |

### 0x05-功能开关

#### 功能开关对照表

| Code | Describe       |
| :--: | :------------- |
| 0x01 | 防丢提醒       |
| 0x02 | 短信提醒       |
| 0x03 | 来电提醒       |
| 0x05 | 蓝牙自动关广播 |
| 0x06 | 抬手亮屏       |
| 0x07 | 翻腕切屏       |
| 0x09 | 微信提醒       |
| 0x0a | QQ提醒         |
| 0x0b | facebook       |
| 0x0c | skype          |
| 0x0d | twitter        |
| 0x0e | whatsAPP       |
| 0x10 | Line           |
| 0x11 | Instagram      |
| 0x12 | HNCloud        |



#### 设置

APP请求

|    域    | 数据 | 长度 | 说明                          |
| :------: | :--: | :--: | ----------------------------- |
|   包头   | 0x68 |  1   |                               |
|  功能码  | 0x05 |  1   |                               |
| 载荷长度 |  xx  |  2   | 低字节先传                    |
| 载荷实体 |  XX  |  1   | 0x00 (设置)                   |
|          |      |  1   | [功能开关码](#功能开关对照表) |
|          |      |  1   | 0x00 关闭<br />0x01 打开      |
|  校验码  |  CS  |  1   |                               |
|   包尾   | 0x16 |  1   |                               |

终端应答

|    域    | 数据 | 长度 | 说明                          |
| :------: | :--: | :--: | ----------------------------- |
|   包头   | 0x68 |  1   |                               |
|  功能码  | 0x86 |  1   |                               |
| 载荷长度 |  xx  |  2   | 低字节先传                    |
| 载荷实体 |  XX  |  1   | 0x00 (设置)                   |
|          |      |  1   | [功能开关码](#功能开关对照表) |
|  校验码  |  CS  |  1   |                               |
|   包尾   | 0x16 |  1   |                               |

#### 读取

APP请求

|    域    | 数据 | 长度 | 说明                          |
| :------: | :--: | :--: | ----------------------------- |
|   包头   | 0x68 |  1   |                               |
|  功能码  | 0x05 |  1   |                               |
| 载荷长度 |  xx  |  2   | 低字节先传                    |
| 载荷实体 |  XX  |  1   | 0x01 (读取)                   |
|          |      |  1   | [功能开关码](#功能开关对照表) |
|  校验码  |  CS  |  1   |                               |
|   包尾   | 0x16 |  1   |                               |

终端应答

|    域    | 数据 | 长度 | 说明                          |
| :------: | :--: | :--: | ----------------------------- |
|   包头   | 0x68 |  1   |                               |
|  功能码  | 0x86 |  1   |                               |
| 载荷长度 |  xx  |  2   | 低字节先传                    |
| 载荷实体 |  XX  |  1   | 0x01 (读取)                   |
|          |      |  1   | [功能开关码](#功能开关对照表) |
|          |      |  1   | 0x00 关闭<br />0x01 打开      |
|  校验码  |  CS  |  1   |                               |
|   包尾   | 0x16 |  1   |                               |

#### 查询

APP请求

|    域    | 数据 | 长度 | 说明                          |
| :------: | :--: | :--: | ----------------------------- |
|   包头   | 0x68 |  1   |                               |
|  功能码  | 0x05 |  1   |                               |
| 载荷长度 |  xx  |  2   | 低字节先传                    |
| 载荷实体 |  XX  |  1   | 0x02 (查询)                   |
|          |      |  1   | [功能开关码](#功能开关对照表) |
|  校验码  |  CS  |  1   |                               |
|   包尾   | 0x16 |  1   |                               |

终端应答

|    域    | 数据 | 长度 | 说明                                   |
| :------: | :--: | :--: | -------------------------------------- |
|   包头   | 0x68 |  1   |                                        |
|  功能码  | 0x86 |  1   |                                        |
| 载荷长度 |  xx  |  2   | 低字节先传                             |
| 载荷实体 |  XX  |  1   | 0x02 (查询)                            |
|          |      |  1   | [功能开关码](#功能开关对照表)          |
|          |      |  1   | 0x88 不支持该功能<br />0x89 支持该功能 |
|  校验码  |  CS  |  1   |                                        |
|   包尾   | 0x16 |  1   |                                        |





### 0x06-获取实时数据

表3实时数据类型汇总

|     类型     | 长度 | 说明                                        |
| :----------: | :--: | ------------------------------------------- |
|     心率     |  1B  | 心率数据(最大值220，超过则用220显示)        |
|   当前步数   |  4B  | 单位步（低字节先传）                        |
|   当前里程   |  4B  | 单位米（低字节先传）                        |
| 当前消耗热量 |  4B  | 单位大卡（KCal）（低字节先传）              |
|   当前步速   |  1B  | 单位  步/s(保留0)                           |
|   体表温度   |  2B  | 低字节在前，体表温度原始值                  |
|   环境温度   |  2B  | 低字节在前，环境温度原始值 计算方法Table  7 |
|   佩戴状态   |  1B  | 1表示佩戴，0表示未佩戴                      |
|     血氧     |  1B  | 血氧含量百分比                              |
|     血压     |  2B  | [1]: 收缩压，[2]: 舒张压                    |
|  血液粘稠度  |  1B  | 血液粘稠度                                  |
|              |      |                                             |

APP请求

|    域    | 数据 | 长度 | 说明               |
| :------: | :--: | :--: | ------------------ |
|   包头   | 0x68 |  1   |                    |
|  功能码  | 0x06 |  1   |                    |
| 载荷长度 |  1   |  2   | 低字节先传         |
| 载荷实体 |  XX  |  1   | 0x00：一般实时数据 |
|  校验码  |  CS  |  1   |                    |
|   包尾   | 0x16 |  1   |                    |

终端应答

|    域    | 数据 | 长度 | 说明                 |
| :------: | :--: | :--: | -------------------- |
|   包头   | 0x68 |  1   |                      |
|  功能码  | 0x86 |  1   |                      |
| 载荷长度 |  xx  |  2   | 低字节先传           |
| 载荷实体 |  XX  |      | 0x00：一般实时数据   |
|          |      |      | 实时数据类型汇总表 3 |
|  校验码  |  CS  |  1   |                      |
|   包尾   | 0x16 |  1   |                      |

**特别地，HRV实时数据**

APP请求

|    域    | 数据 | 长度 | 说明              |
| :------: | :--: | :--: | ----------------- |
|   包头   | 0x68 |  1   |                   |
|  功能码  | 0x06 |  1   |                   |
| 载荷长度 |  1   |  2   | 低字节先传        |
| 载荷实体 |  XX  |  1   | 0x04：HRV实时数据 |
|  校验码  |  CS  |  1   |                   |
|   包尾   | 0x16 |  1   |                   |

终端应答

|    域    | 数据 | 长度 | 说明              |
| :------: | :--: | :--: | ----------------- |
|   包头   | 0x68 |  1   |                   |
|  功能码  | 0x86 |  1   |                   |
| 载荷长度 | 1+14 |  2   | 低字节先传        |
| 载荷实体 |  XX  |  1   | 0x04：HRV实时数据 |
|          |      |  25  | 5 \|SDNN          |
|          |      |      | 5 \|TP            |
|          |      |      | 5 \|LF            |
|          |      |      | 5\|HF             |
|          |      |      | 5\|VLF            |
|  校验码  |  CS  |  1   |                   |
|   包尾   | 0x16 |  1   |                   |

### 0x09-自定义提醒

表4提醒参数表

|      类型      |        长度        | 说明                                                         |
| :------------: | :----------------: | ------------------------------------------------------------ |
|    提醒类型    |         1B         | 1：运动；2：约会；3：喝水；4：吃药；5：睡觉；6：自定义提醒   |
|  提醒时间总数  |         1B         | 表示一天中有几个时间点去提示（最大6个）                      |
|    提醒时间    |        N*2B        | 时分（N是时间点总数）                                        |
|    星期重复    |         1B         | 从低位到高位依次代表星期日到星期六，最高位（第7位）默认为0，<br />其他位0表示该星期不重复，1表示该星期重复 |
| 提醒（语）名称 | 提醒名称的字节长度 | 使用unicode编码，最大44个字节长度，相当于可有22个ASCII或中文；<br />如果提醒类型是1~5，则不用传递提醒语 |

**1.自定义提醒查询**

APP请求

|    域    | 数据 | 长度 | 说明                                           |
| :------: | :--: | :--: | ---------------------------------------------- |
|   包头   | 0x68 |  1   |                                                |
|  功能码  | 0x09 |  1   |                                                |
| 载荷长度 |  2   |  2   | 低字节先传                                     |
| 载荷实体 |  XX  |  2   | 0x00：读取                                     |
|          |      |      | 编号：0–7每个提醒都有固定编号，提醒个数最大为8 |
|  校验码  |  CS  |  1   |                                                |
|   包尾   | 0x16 |  1   |                                                |

终端应答

|    域    | 数据 | 长度 | 说明                                           |
| :------: | :--: | :--: | ---------------------------------------------- |
|   包头   | 0x68 |  1   |                                                |
|  功能码  | 0x89 |  1   |                                                |
| 载荷长度 | 2+n  |  2   | 低字节先传                                     |
| 载荷实体 |  XX  | 2+n  | 0x00：读取                                     |
|          |      |      | 编号：0–7每个提醒都有固定编号，提醒个数最大为8 |
|          |      |      | 提醒参数表Table 4                              |
|  校验码  |  CS  |  1   |                                                |
|   包尾   | 0x16 |  1   |                                                |

```
例如：查询编号0的提醒
APP发送请求：
68 09 02 00 00 00 73 16
终端应答：
68 89 07 00 00 00 01 01 09 20 88 ab 16
注意：如果查询的编号没有数据，89变为C9，即异常位置位，后跟载荷长度为0
68 C9 00 00 31 16
```

**2.自定义提醒设置**

APP请求

|    域    | 数据 | 长度 | 说明                                           |
| :------: | :--: | :--: | ---------------------------------------------- |
|   包头   | 0x68 |  1   |                                                |
|  功能码  | 0x09 |  1   |                                                |
| 载荷长度 |  2   |  2   | 低字节先传                                     |
| 载荷实体 |  XX  | 2+n  | 0x01：设置                                     |
|          |      |      | 编号：0–7每个提醒都有固定编号，提醒个数最大为8 |
|          |      |      | 提醒参数表4                                    |
|  校验码  |  CS  |  1   |                                                |
|   包尾   | 0x16 |  1   |                                                |

终端应答

|    域    | 数据 | 长度 | 说明       |
| :------: | :--: | :--: | ---------- |
|   包头   | 0x68 |  1   |            |
|  功能码  | 0x89 |  1   |            |
| 载荷长度 |  0   |  2   | 低字节先传 |
|  校验码  |  CS  |  1   |            |
|   包尾   | 0x16 |  1   |            |

```
例如：增加运动提醒，编号为1，提醒个数为1，时间9:31，提醒周期为星期三
APP发送请求：
68 09 07 00 01 00 01 01 09 20 88 2C 16
终端应答：
68 89 00 00 F1 16
```

**3.自定义提醒删除**

APP请求

|    域    | 数据 | 长度 | 说明                                           |
| :------: | :--: | :--: | ---------------------------------------------- |
|   包头   | 0x68 |  1   |                                                |
|  功能码  | 0x09 |  1   |                                                |
| 载荷长度 |  2   |  2   | 低字节先传                                     |
| 载荷实体 |  XX  |  2   | 0x02：删除                                     |
|          |      |      | 编号：0–7每个提醒都有固定编号，提醒个数最大为8 |
|  校验码  |  CS  |  1   |                                                |
|   包尾   | 0x16 |  1   |                                                |

终端应答

|    域    | 数据 | 长度 | 说明       |
| :------: | :--: | :--: | ---------- |
|   包头   | 0x68 |  1   |            |
|  功能码  | 0x89 |  1   |            |
| 载荷长度 |  0   |  2   | 低字节先传 |
|  校验码  |  CS  |  1   |            |
|   包尾   | 0x16 |  1   |            |

```
例如：删除编号0的提醒
APP发送请求：
68 09 02 00 02 00 75 16
终端应答
68 89 00 00 F1 16
```



### 0x0B-短消息提醒

> 仅需要在 Android App上实现该协议， IOS App无需实现该协议



#### 短消息类型表

| Code | Describe         |
| :--: | ---------------- |
| 0x00 | 短信             |
| 0x01 | 微信             |
| 0x02 | QQ               |
| 0x03 | facebook         |
| 0x04 | skype            |
| 0x05 | twitter          |
| 0x06 | whatsAPP         |
| 0x10 | Line             |
| 0x11 | Instagram        |
| 0x12 | HNCloud          |
| 0xF0 | 学生手表特定消息 |
| 0xFE | others           |



#### 通用版本

表5短消息参数如下，参数顺序不能更改，均为纯HEX表示的数字

|   条目   |     长度      | 说明                                                         |
| :------: | :-----------: | ------------------------------------------------------------ |
|   类型   |      1B       | [短消息类型](#短消息类型表)                                  |
| 提醒内容 | 100B   (最大) | 短信：发送者姓名，如果发送者不在通信录，则发送发送者的电话号码  <br />微信：根据实际推送显示  <br />QQ：根据实际推送显示  <br />学生手表特定消息：见下表 6    <br />除学生手表特定消息外，其他消息长度最大100字节，采用UTF-8编码 |

表6学生手表消息内容格式

|   条目   | 字节长度 | 说明                           |
| :------: | :------: | ------------------------------ |
| 消息属性 |    1     | 01：校内通知；  02：云校通知   |
|  发送者  |    1     | 发送者名称长度                 |
|          |    N     | 发送者名称，如张老师，数学老师 |
| 消息编号 |    2     | 每条消息的编号，从1开始。      |
| 提醒内容 |    2     | 消息内容长度                   |
|          |    N     | 消息内容                       |

APP请求

|    域    | 数据 | 长度 | 说明           |
| :------: | :--: | :--: | -------------- |
|   包头   | 0x68 |  1   |                |
|  功能码  | 0x0B |  1   |                |
| 载荷长度 |  n   |  2   | 低字节先传     |
| 载荷实体 |  n   |  n   | 短消息参数表 5 |
|  校验码  |  CS  |  1   |                |
|   包尾   | 0x16 |  1   |                |

终端应答

|    域    | 数据 | 长度 | 说明                   |
| :------: | :--: | :--: | ---------------------- |
|   包头   | 0x68 |  1   |                        |
|  功能码  | 0x8B |  1   |                        |
| 载荷长度 |  1   |  2   | 低字节先传             |
| 载荷实体 |  1   |  1   | APP请求的类型          |
|          |      | 1/0  | 消息编号，该字段可选。 |
|  校验码  |  CS  |  1   |                        |
|   包尾   | 0x16 |  1   |                        |



#### B10C_v1.9.78 及以上版本

APP请求

|    域    | 数据 | 长度 | 说明                                                         |
| :------: | :--: | :--: | ------------------------------------------------------------ |
|   包头   | 0x68 |  1   |                                                              |
|  功能码  | 0x0B |  1   |                                                              |
| 载荷长度 |  xx  |  2   | 低字节先传                                                   |
| 载荷实体 |  xx  |  1   | [ 消息类型 ]<br/>详情请查看[短消息类型](#短消息类型表)       |
|          |      | 1+n  | [ 消息标题 ]<br/>格式: 1B(lenght) + nB(title)<br/>lenght - title数据长度最大值32，title - UTF8编码格式 |
|          |      | 1+n  | [ 消息内容 ]<br/>格式: 1B(lenght) + nB(content)<br/>lenght - content数据长度最大值100，content - UTF8编码格式 |
|  校验码  |  CS  |  1   |                                                              |
|   包尾   | 0x16 |  1   |                                                              |

终端应答

|    域    | 数据 | 长度 | 说明          |
| :------: | :--: | :--: | ------------- |
|   包头   | 0x68 |  1   |               |
|  功能码  | 0x8B |  1   |               |
| 载荷长度 |  2   |  2   | 低字节先传    |
| 载荷实体 |  1   |  1   | APP请求的类型 |
|  校验码  |  CS  |  1   |               |
|   包尾   | 0x16 |  1   |               |





### 0x11-清除数据

**1.恢复出厂设置 类型0x01**

APP请求

|    域    | 数据 | 长度 | 说明                        |
| :------: | :--: | :--: | --------------------------- |
|   包头   | 0x68 |  1   |                             |
|  功能码  | 0x11 |  1   |                             |
| 载荷长度 |  1   |  2   | 低字节先传                  |
| 载荷实体 |  XX  |  1   | 操作类型：0x01-恢复出厂设置 |
|  校验码  |  CS  |  1   |                             |
|   包尾   | 0x16 |  1   |                             |

终端应答

|    域    | 数据 | 长度 | 说明                        |
| :------: | :--: | :--: | --------------------------- |
|   包头   | 0x68 |  1   |                             |
|  功能码  | 0x91 |  1   |                             |
| 载荷长度 |  2   |  2   | 低字节先传                  |
| 载荷实体 |  XX  |  2   | 操作类型：0x01-恢复出厂设置 |
|          |      |      | 状态位：0：成功 1：失败     |
|  校验码  |  CS  |  1   |                             |
|   包尾   | 0x16 |  1   |                             |

### 0x13-找手环

APP请求

|    域    | 数据 | 长度 | 说明                     |
| :------: | :--: | :--: | ------------------------ |
|   包头   | 0x68 |  1   |                          |
|  功能码  | 0x13 |  1   |                          |
| 载荷长度 |  1   |  2   | 低字节先传               |
| 载荷实体 |  XX  |  1   | 开始：0x00    结束：0x01 |
|  校验码  |  CS  |  1   |                          |
|   包尾   | 0x16 |  1   |                          |

终端应答

|    域    | 数据 | 长度 | 说明                     |
| :------: | :--: | :--: | ------------------------ |
|   包头   | 0x68 |  1   |                          |
|  功能码  | 0x93 |  1   |                          |
| 载荷长度 |  1   |  2   | 低字节先传               |
| 载荷实体 |  XX  |  1   | 开始：0x00    结束：0x01 |
|  校验码  |  CS  |  1   |                          |
|   包尾   | 0x16 |  1   |                          |

### 0x15-SOS求救

终端主动上传

|    域    | 数据 | 长度 | 说明                                                         |
| :------: | :--: | :--: | ------------------------------------------------------------ |
|   包头   | 0x68 |  1   |                                                              |
|  功能码  | 0x95 |  1   |                                                              |
| 载荷长度 |  1   |  2   | 低字节先传                                                   |
| 载荷实体 |  XX  |  1   | 求救类型：0x00：按键求救<br />                    0x01：跌倒求救 |
|          |      |  8   | 保留(0)                                                      |
|  校验码  |  CS  |  1   |                                                              |
|   包尾   | 0x16 |  1   |                                                              |

APP应答

|    域    | 数据 | 长度 | 说明         |
| :------: | :--: | :--: | ------------ |
|   包头   | 0x68 |  1   |              |
|  功能码  | 0x15 |  1   |              |
| 载荷长度 |  0   |  1   | 0x01收到请求 |
|  校验码  |  CS  |  1   |              |
|   包尾   | 0x16 |  1   |              |

###  0x20-校时

APP请求

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x20   |    1     |                                                              |
| **载荷长度** |    4     |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    4     | 时间(本地时间: UTC时间秒数  + 当前时区时间差）<br />如北京时间(北京处于东八区)  则数值为 UTC时间加8小时(28800秒)所换算出来的秒数 |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |

终端应答

|      域      | **数据** | **长度** | **说明**   |
| :----------: | :------: | :------: | ---------- |
|   **包头**   |   0x68   |    1     |            |
|  **功能码**  |   0xa0   |    1     |            |
| **载荷长度** |    0     |    2     | 低字节先传 |
|  **校验码**  |    CS    |    1     |            |
|   **包尾**   |   0x16   |    1     |            |


### 0x17-获取历史数据

**历史数据定义为：当日00:00 至 次日00:00前的数据。特别注意，获取当天的数据为无效数据，只能今天获取昨天的数据（才能称为历史数据）。**

APP请求

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x17   |    1     |                                                              |
| **载荷长度** |    6     |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传(要获取的某天)  时间大于2000，<br />若获取 2018 年，则年字节为 2018-2000=18 |
|              |          |    1     | 包类型值，要获取的历史数据包类型(见具体协议)                 |
|              |          |    1     | 总包数 (见具体协议)                                          |
|              |          |    1     | 包序号 (起始包序号1)                                         |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |

终端应答 

|      域      | **数据** | **长度** | **说明**                                         |
| :----------: | :------: | :------: | ------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                  |
|  **功能码**  |   0x17   |    1     |                                                  |
| **载荷长度** |   6+n    |    2     | 低字节先传                                       |
| **载荷实体** |          |    3     | 时间：年月日，日先传(要获取的某天)               |
|              |          |    1     | 包类型值，要获取的历史数据包，详情见上传全天数据 |
|              |          |    1     | 包总数（总包数 0 （错误应答，见下表））          |
|              |          |    1     | 包序列                                           |
|              |          |    n     | 数据                                             |
|  **校验码**  |    CS    |    1     |                                                  |
|   **包尾**   |   0x16   |    1     |                                                  |

错误应答

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x17   |    1     |                                                              |
| **载荷长度** |    6     |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传(要获取的某天)                           |
|              |          |    1     | 包类型值，要获取的历史数据包                                 |
|              |          |    1     | 总包数 0 （出现错误）                                        |
|              |          |    1     | 错误码   0：没有当天数据  1: 暂不支持该包类型  2: 包总数错误  3：包序号错误 |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |

```
例如：获取 2018-01-01 数据，总包数 2
APP发送(获取第1包)：
68  17  0600  01 01 12 xx 02 01  xx  16
终端应答(第1包数据)：
68  17  xx00  01 01 12 xx 02 01  …  xx  16
APP发送(获取第2包)：
68  17  0600  01 01 12 xx 02 02  xx  16
终端应答(第2包数据)：
68  17  xx00  01 01 12 xx 02 02  …  xx  16
```



#### 全天总数据-类型0x00

终端应答

|      域      | **数据** | **长度** | **说明**             |
| :----------: | :------: | :------: | -------------------- |
|   **包头**   |   0x68   |    1     |                      |
|  **功能码**  |   0x17   |    1     |                      |
| **载荷长度** |    32    |    2     | 低字节先传           |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传 |
|              |          |    1     | 包类型值固定为0x00   |
|              |          |    1     | 包总数  总包数为1    |
|              |          |    1     | 包序号               |
|              |          |    4     | 总计步               |
|              |          |    4     | 总热量，KCal         |
|              |          |    4     | 总里程，米           |
|              |          |    4     | 活动时间，分钟       |
|              |          |    4     | 活动消耗热量，Kcal   |
|              |          |    4     | 静坐时间，分钟       |
|              |          |    4     | 静坐消耗热量，Kcal   |
|  **校验码**  |    CS    |    1     |                      |
|   **包尾**   |   0x16   |    1     |                      |



#### 全天运动情况(频率1小时)-类型0x01

终端应答

|      域      | **数据** | **长度** | **说明**                                       |
| :----------: | :------: | :------: | ---------------------------------------------- |
|   **包头**   | **0x68** |  **1**   |                                                |
|  **功能码**  |   0x17   |    1     |                                                |
| **载荷长度** |   6+n    |    2     | 低字节先传                                     |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                           |
|              |          |    1     | 包类型值固定为0x01                             |
|              |          |    1     | 包总数  总包数为1                              |
|              |          |    1     | 包序号                                         |
|              |          |    n     | 8 \|4B计步 + 4B卡路里 (代表一个小时的运动数据) |
|              |          |          | 8 \| 4B计步 + 4B卡路里                         |
|              |          |          | …\|  …                                         |
|  **校验码**  |    CS    |    1     |                                                |
|   **包尾**   |   0x16   |    1     |                                                |



#### 全天睡眠情况-类型0x02

一般格式

终端应答

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x17   |    1     |                                                              |
| **载荷长度** |    42    |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                                         |
|              |          |    1     | 包类型值固定为0x02                                           |
|              |          |    1     | 包总数  总包数为1                                            |
|              |          |    1     | 包序号                                                       |
|              |          |    36    | 睡眠数据，每两个bit表示一个10分钟的睡眠质量,0:活动，1：浅度，2：深度 3：未监测 |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |

B10C_v1.8.9及以上的版本格式

终端应答

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x17   |    1     |                                                              |
| **载荷长度** |   6+n    |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                                         |
|              |          |    1     | 包类型值固定为0x02                                           |
|              |          |    1     | 包总数  总包数为2                                            |
|              |          |    1     | 包序号                                                       |
|              |          |    8     | (仅包序号为 1时包含)  [1-2]: 清醒时间(分钟)  [3-4]: 浅睡时间(分钟)  [5-6]: 深睡时间(分钟)  [7-8]: 快速眼动时间(分钟) |
|              |          |    n     | (若10:00未醒来则会继续监测至清醒)  数据内容: 睡眠状态  + 起始时间(时-分) <br /> 睡眠状态:   0 清醒, 1 浅睡, 2  深睡, 3 快速动眼, 255 无效数据 <br /> (==**注: 第一组必为浅睡,最后一组必为清醒状态,若出现无效数据则后续数据均为无效数据**==) |
|              |          |          | 3  \|  1B睡眠状态 + 1B时 +  1B分                             |
|              |          |          | 3  \|  1B睡眠状态 + 1B时 +  1B分                             |
|              |          |          | … \|   ...                                                   |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |



#### 全天计步详情(频率5分钟)-类型0x04

终端应答

|      域      | **数据** | **长度** | **说明**                            |
| :----------: | :------: | :------: | ----------------------------------- |
|   **包头**   |   0x68   |    1     |                                     |
|  **功能码**  |   0x17   |    1     |                                     |
| **载荷长度** |   6+n    |    2     | 低字节先传                          |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                |
|              |          |    1     | 包类型值固定为0x04                  |
|              |          |    1     | 总包数 3                            |
|              |          |    1     | 包序号                              |
|              |          |    n     | 2 \| 2B步数 (代表5分钟内的计步数据) |
|              |          |          | 2 \|2B步数                          |
|              |          |          | …\|                                 |
|  **校验码**  |    CS    |    1     |                                     |
|   **包尾**   |   0x16   |    1     |                                     |



#### 全天热量详情(频率5分钟)-类型0x05

终端应答

|      域      | **数据** | **长度** | **说明**                                    |
| :----------: | :------: | :------: | ------------------------------------------- |
|   **包头**   |   0x68   |    1     |                                             |
|  **功能码**  |   0x17   |    1     |                                             |
| **载荷长度** |   6+n    |    2     | 低字节先传                                  |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                        |
|              |          |    1     | 包类型值固定为0x05                          |
|              |          |    1     | 总包数 3                                    |
|              |          |    1     | 包序号                                      |
|              |          |    n     | 2 \| 2B卡路里 (代表5分钟内的卡路里消耗数据) |
|              |          |          | 2 \| 2B卡路里                               |
|              |          |          | …                                           |
|  **校验码**  |    CS    |    1     |                                             |
|   **包尾**   |   0x16   |    1     |                                             |



#### 全天心率(频率5秒)-类型0x07

终端应答

|      域      | **数据** | **长度** | **说明**                                 |
| :----------: | :------: | :------: | ---------------------------------------- |
|   **包头**   |   0x68   |    1     |                                          |
|  **功能码**  |   0x17   |    1     |                                          |
| **载荷长度** |   6+n    |    2     | 低字节先传                               |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                     |
|              |          |    1     | 包类型值固定为0x07                       |
|              |          |    1     | 总包数  总包数为96                       |
|              |          |    1     | 包序号                                   |
|              |          |    n     | 1   \| 1B心率值(代表每5秒记录的心率数据) |
|              |          |          | 1   \|  1B心率值                         |
|              |          |          | …  \|  …                                 |
|  **校验码**  |    CS    |    1     |                                          |
|   **包尾**   |   0x16   |    1     |                                          |



#### 全天血氧(频率5分钟)-类型0x09

终端应答

|      域      | **数据** | **长度** | **说明**                                   |
  | :----------: | :------: | :------: | ------------------------------------------ |
  |   **包头**   |   0x68   |    1     |                                            |
  |  **功能码**  |   0x17   |    1     |                                            |
  | **载荷长度** |   6+n    |    2     | 低字节先传                                 |
  | **载荷实体** |    XX    |    3     | 时间：年月日，日先传                       |
  |              |          |    1     | 包类型值固定为0x09                         |
  |              |          |    1     | 包总数  默认总包数为2                      |
  |              |          |    1     | 包序号 （起始 1）                          |
  |              |          |    n     | 1   \| 1B血氧值(代表每5分钟监测的血氧数据) |
  |              |          |          | 1   \| 1B血氧值                            |
  |              |          |          | …  \| …                                    |
  |  **校验码**  |    CS    |    1     |                                            |
  |   **包尾**   |   0x16   |    1     |                                            |



#### 全天RRI(频率5秒)-类型0x0A

终端应答

|      域      | **数据** | **长度** | **说明**                               |
| :----------: | :------: | :------: | -------------------------------------- |
|   **包头**   |   0x68   |    1     |                                        |
|  **功能码**  |   0x17   |    1     |                                        |
| **载荷长度** |   6+n    |    2     | 低字节先传                             |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                   |
|              |          |    1     | 包类型值固定为0x0A                     |
|              |          |    1     | 包总数 默认总包数为180                 |
|              |          |    1     | 包序号                                 |
|              |          |    n     | 2  \| 2B RRI值(代表每5秒记录的RRI数据) |
|              |          |          | 2  \| 2B RRI值                         |
|              |          |          | … \|                                   |
|  **校验码**  |    CS    |    1     |                                        |
|   **包尾**   |   0x16   |    1     |                                        |



#### 全天温度(频率5分钟)-类型0x0B

终端应答

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x17   |    1     |                                                              |
| **载荷长度** |   6+n    |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                                         |
|              |          |    1     | 包类型值固定为0x0B                                           |
|              |          |    1     | 包总数  默认总包数为6                                        |
|              |          |    1     | 包序号                                                       |
|              |          |    n     | 体温计算方法Table 7                                          |
|              |          |          | 4  \| 2B体表温度(0xFFFF无效值) + 2B环境温度  (代表每5分钟记录的温度数据) |
|              |          |          | 4  \|  2B体表温度(0xFFFF无效值) + 2B环境温度                 |
|              |          |          | … \|  …                                                      |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |

```
华氏温度计算方法（在体表数据不为0xFFFF时使用）：
例如:一段完整数据[AA BB CC DD](以实际获取为准)
z人体温度,y体表温度,x环境温度(均为浮点型数值)
y = 0xBBAA * 0.005;
x = 0xDDCC * 0.005;
z=0.0337*y*y-0.545*y+1.7088*x-0.0519*x*y+17.626
```



#### 全天大气压(频率10分钟)-类型0x0C

终端应答

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x17   |    1     |                                                              |
| **载荷长度** |   6+n    |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                                         |
|              |          |    1     | 包类型值固定为0x0C                                           |
|              |          |    1     | 包总数  默认总包数为3                                        |
|              |          |    1     | 包序号                                                       |
|              |          |    n     | 4B气压数据说明: 3B整数 + 1B小数  实际气压值(浮点型) =  (int)[1,3] + (int)[4]/100.0 |
|              |          |          | 4 \| 4B气压值数据 (代表每10分钟记录的气压数据)               |
|              |          |          | 4 \| 4B气压值数据                                            |
|              |          |          | …\|                                                          |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |



#### 全天血压数据(频率5分钟)-类型0x0E

终端应答
|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x17   |    1     |                                                              |
| **载荷长度** |   6+n    |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                                         |
|              |          |    1     | 包类型值固定为0x0E                                           |
|              |          |    1     | 包总数 默认总包数为6                                         |
|              |          |    1     | 包序号                                                       |
|              |          |    n     | 诊断值:0 正常      1  高压过高， 2 高压过低      3  低压过高， 4 低压过低      5  无效数据 |
|              |          |          | 3  \|  1B收缩压 + 1B舒张压 + 1B诊断值  (代表每5分钟监测的血压数据) |
|              |          |          | 3  \|  1B收缩压 + 1B舒张压 + 1B诊断值                        |
|              |          |          | … \| …                                                       |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |



#### 全天佩戴状态(频率5秒)-类型0x0F

终端应答

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x17   |    1     |                                                              |
| **载荷长度** |   6+n    |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                                         |
|              |          |    1     | 包类型值固定为0x0F                                           |
|              |          |    1     | 包总数 总包数为12                                            |
|              |          |    1     | 包序号                                                       |
|              |          |    n     | 1B包含40s的佩戴状态,  1bit表示5s的状态，  0表示佩戴 1表示未佩戴 |
|              |          |          | 1  \| 1B佩戴状态 (代表40秒内的佩戴状态数据)                  |
|              |          |          | 1  \| 1B佩戴状态                                             |
|              |          |          | … \|  …                                                      |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |



#### 全天HRV(频率5分钟)-类型0x10

终端应答

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x17   |    1     |                                                              |
| **载荷长度** |   6+n    |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                                         |
|              |          |    1     | 包类型值固定为0x10                                           |
|              |          |    1     | 包总数 总包数为36                                            |
|              |          |    1     | 包序号                                                       |
|              |          |    n     | 每5B数据说明: 4B整数  + 1B小数                               |
|              |          |          | 25 \|  5B SDNN + 5B TP + 5B LF + 5B  HF + 5B VLF   (代表每5分钟监测的HRV数据) |
|              |          |          | 25 \|  5B SDNN + 5B TP + 5B LF + 5B  HF + 5B VLF             |
|              |          |          | …  \| …                                                      |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |

```
HRV数据说明:
5B SDNN {float sdnn = (int)[1,4] + ((int)[5])/255.0;}
5B TP   {float tp   = (int)[1,4] + ((int)[5])/255.0;}
5B LF   {float lf   = (int)[1,4] + ((int)[5])/255.0;}
5B HF   {float hf   = (int)[1,4] + ((int)[5])/255.0;}
5B VLF  {float vlf  = (int)[1,4] + ((int)[5])/255.0;}
```

**心理标准：一天平均值/测评情境下的指标**

| 指标名称 | 计算公式    | 差   | 中       | 好   |
  | -------- | ----------- | ---- | -------- | ---- |
  | 精神压力 | 50+LF/100   | ＞68 | [58, 68] | ＜58 |
  | 疲劳度   | TP/100      | ＜25 | [25, 50] | ＞50 |
  | 抗压能力 | 50+SDNN/10  | ＜60 | [60, 70] | ＞70 |
  | 调节能力 | 40+LF*10/HF | ＜55 | [55, 60] | ＞60 |



#### 全天定位数据(频率5分钟)-类型0x11

终端应答

|      域      | **数据** | **长度** | **说明**                                         |
| :----------: | :------: | :------: | ------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                  |
|  **功能码**  |   0x17   |    1     |                                                  |
| **载荷长度** |   6+n    |    2     | 低字节先传                                       |
| **载荷实体** |    XX    |    3     | 时间：年月日，日先传                             |
|              |          |    1     | 包类型值固定为0x11                               |
|              |          |    1     | 包总数 总包数为18                                |
|              |          |    1     | 包序号                                           |
|              |          |    n     | 11 \| 1B类型 + 2B可信度 +  4B纬度 + 4B经度 (表8) |
|              |          |          | 11 \| 1B类型 + 2B可信度 +  4B纬度 + 4B经度       |
|              |          |          | …   \|                                           |
|  **校验码**  |    CS    |    1     |                                                  |
|   **包尾**   |   0x16   |    1     |                                                  |

表8 定位数据说明

|  **类型**   |                     | 0-无效类型，1-NB基站定位，2-CAT1基站定位，3-WIFI定位，4-GPS定位 |
| :---------: | ------------------- | ------------------------------------------------------------ |
| **可信度**  | Wi-Fi、基站定位类型 | 表示定位误差范围，单位米                                     |
| GPS定位类型 |                     | 100 表示定位成功4颗卫星SNR 40以上  70  表示定位成功3颗卫星SNR40  <br />50  表示定位成功 2颗卫星SNR40  25  表示定位成功 1颗卫星SNR40  10 表示定位成功 无卫星SNR40 |
|  **纬度**   |                     | 实际纬度值(浮点型) = (int)[1,4]/100000.0                     |
|  **经度**   |                     | 实际纬度值(浮点型) = (int)[1,4]/100000.0                     |



#### 全天历史数据概况-类型0xFF

终端应答

|      域      | **数据** | **长度** | **说明**                                                     |
  | :----------: | :------: | :------: | ------------------------------------------------------------ |
  |   **包头**   |   0x68   |    1     |                                                              |
  |  **功能码**  |   0x17   |    1     |                                                              |
  | **载荷长度** |   6+n    |    2     | 低字节先传                                                   |
  | **载荷实体** |    XX    |    3     | 时间：年月日，日先传                                         |
  |              |          |    1     | 包类型值固定为0xFF                                           |
  |              |          |    1     | 包总数 总包数为1                                             |
  |              |          |    1     | 包序号                                                       |
  |              |          |    n     | [0]bit代表包序号1状态，  [1]bit代表包序号2状态，  …  以此类推 |
  |              |          |          | 1 \|  计步详情 - 共1包                                       |
  |              |          |          | 1 \|  热量详情 - 共1包                                       |
  |              |          |          | 12 \|  心率包状态 - 共96包                                   |
  |              |          |          | 1 \|  血氧包状态 - 共2包                                     |
  |              |          |          | 23 \|  RRI包状态 - 共180包                                   |
  |              |          |          | 1 \|  温度包状态 - 共6包                                     |
  |              |          |          | 1 \|  气压包状态 - 共3包                                     |
  |              |          |          | 1 \|  血压包状态 - 共6包                                     |
  |              |          |          | 4 \|  HRV包状态 - 共36包                                     |
  |              |          |          | 1 \|  存储日期个数m，m最大7                                  |
  |              |          |          | m*3 \| 1B年 + 1B月 + 1B日 (终端记录历史数据日期)             |
  |              |          |          | …                                                            |
  |  **校验码**  |    CS    |    1     |                                                              |
  |   **包尾**   | **0x16** |  **1**   |                                                              |

```
历史数据包状态算法：
例如：获取心率数据包状态
uint8_t buf[12];//心率数据状态缓存(从0xFF类型返回的数据中获取心率字段数据)
index 			//要获取的包索引 >= 1
state = buf[(index-1)/8] & 0x01<<((index-1)%8);
state 状态值 
0: 无效数据或未存储数据
1：有效数据包(该包包含有效数据)

```



### 0x18-获取终端记录数据

APP请求

|      域      | **数据** | **长度** | **说明**                                                     |
  | :----------: | :------: | :------: | ------------------------------------------------------------ |
  |   **包头**   |   0x68   |    1     |                                                              |
  |  **功能码**  |   0x18   |    1     |                                                              |
  | **载荷长度** |    xx    |    2     | 低字节先传                                                   |
  | **载荷实体** |    XX    |    1     | Type                                                         |
  |              |          |    1     | 索引参数(下发 0开始获取记录，  记录上传顺序为 最新记录 -> 旧记录) |
  |  **校验码**  |    CS    |    1     |                                                              |
  |   **包尾**   |   0x16   |    1     |                                                              |

终端应答

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x98   |    1     |                                                              |
| **载荷长度** |    xx    |    2     | 低字节先传                                                   |
| **载荷实体** |    xx    |    1     | Type (若为0表示出现异常,参照下表)                            |
|              |          |    1     | 索引参数(若为 0 则表示无后续数据,否则应继续下发该索引参数以获取所有数据) |
|              |          |    …     | 数据(无记录时为NULL)                                         |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |

错误应答

|      域      | **数据** | **长度** | **说明**                                  |
| :----------: | :------: | :------: | ----------------------------------------- |
|   **包头**   |   0x68   |    1     |                                           |
|  **功能码**  |   0x98   |    1     |                                           |
| **载荷长度** |    xx    |    2     | 低字节先传                                |
| **载荷实体** |    xx    |    1     | Type: 0x00                                |
|              |          |    1     | 错误码:  0x01 不支持该类型  0x02 数据异常 |
|  **校验码**  |    CS    |    1     |                                           |
|   **包尾**   |   0x16   |    1     |                                           |

#### 运动记录-类型0x01

APP请求

|      域      | **数据** | **长度** | **说明**   |
| :----------: | :------: | :------: | ---------- |
|   **包头**   |   0x68   |    1     |            |
|  **功能码**  |   0x18   |    1     |            |
| **载荷长度** |    xx    |    2     | 低字节先传 |
| **载荷实体** |    XX    |    1     | Type: 0x01 |
|              |          |    1     | 索引参数   |
|  **校验码**  |    CS    |    1     |            |
|   **包尾**   |   0x16   |    1     |            |

终端应答

|      域      | **数据** | **长度** | **说明**                               |
| :----------: | :------: | :------: | -------------------------------------- |
|   **包头**   |   0x68   |    1     |                                        |
|  **功能码**  |   0x98   |    1     |                                        |
| **载荷长度** |   2+n    |    2     | 低字节先传                             |
| **载荷实体** |    xx    |    1     | type: 0x01                             |
|              |          |    1     | 索引参数                               |
|              |          |    n     | 39  \| 1B运动类型 + 38B运动数据 (表 9) |
|              |          |          | 39  \|1B运动类型 + 38B运动数据         |
|              |          |          | …                                      |
|  **校验码**  |    CS    |    1     |                                        |
|   **包尾**   |   0x16   |    1     |                                        |

表9 运动记录数据说明

| 运动类型     | 0x01徒步, 0x02跑步, 0x03爬山, 0x04球类运动, 0x05力量训练, 0x06有氧运动, 0x07跑步机, 0x08跳绳,  <br />0x09室内自行车,  0x0A山地自行车, 0x0B高强度训练, 0x0C自由训练, 0x0D游泳, 0x0E瑜伽, 0xFE自定义运动 |
| ------------ | ------------------------------------------------------------ |
| **运动数据** | [1,4] : 运动时间(本地时间)  [5,8] : 运动时长(秒)  [9,12] : 步数  [13,16]: 距离(米)  [17,18]: 热量消耗(Kcal)  <br />[19]  : 最大心率  [20]  : 平均心率  [21,22]: 平均配速(s/km)  [23,38]: 保留(FF)  注:   若某字段数据字节均为0xFF则表明该运动类型无此项参数 |

### 0x22-运动事件上报

终端上报

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0xa2   |    1     |                                                              |
| **载荷长度** |    n     |    2     | 低字节先传                                                   |
| **载荷实体** |    XX    |    4     | 开始时间,本地时间的秒数，低字节先传                          |
|              |          |    4     | 结束时间,本地时间的秒数，低字节先传                          |
|              |          |    1     | 包类型值固定为4，表示包头                                    |
|              |          |    1     | 运动类型  0X01: 徒步  0X02：跑步  0X03: 爬山  0X04：球类运动  0X05：力量训练  0X06：有氧运动<br />------------<br />**B10新增类型  0x07: 跑步机  0x08: 跳绳  0x09: 室内自行车  0x0a: 山地自行车  0x0b: 高强度训练  <br />0x0c: 自由训练  0x0d: 游泳  0x0e: 瑜伽** <br />------------<br />0XFE: 自定义运动 |
|              |          |    4     | 消耗热量,单位KCal，低字节先传                                |
|              |          |    4     | 总步数，单位步，低字节先传                                   |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |

APP下发

|      域      | **数据** | **长度** | **说明**                            |
  | :----------: | :------: | :------: | ----------------------------------- |
  |   **包头**   |   0x68   |    1     |                                     |
  |  **功能码**  |   0x22   |    1     |                                     |
  | **载荷长度** |    4     |    2     | 低字节先传                          |
  | **载荷实体** |    XX    |    4     | 开始时间,本地时间的秒数，低字节先传 |
  |              |          |    4     | 结束时间,本地时间的秒数，低字节先传 |
  |              |          |    1     | 包类型值固定为4，表示包头           |
  |  **校验码**  |    CS    |    1     |                                     |
  |   **包尾**   |   0x16   |    1     |                                     |

### 0x35-设置终端信息

#### 设置用户信息

APP请求

|      域      | **数据** | **长度** | **说明**                                        |
| :----------: | :------: | :------: | ----------------------------------------------- |
|   **包头**   |   0x68   |    1     |                                                 |
|  **功能码**  |   0x35   |    1     |                                                 |
| **载荷长度** |    n     |    2     |                                                 |
| **载荷实体** |          |    1     | FLAG1: 0X04                                     |
|              |          |    1     | FLAG2: 0X01(用户信息)                           |
|              |          |   1+m    | 1B姓名长度 + 姓名数据(UTF-8编码)                |
|              |          |   1+o    | 1B(编号/学号)长度  + (编号/学号)数据(UTF-8编码) |
|              |          |   1+p    | 1B(类别/班级)长度  + (类别/班级)数据(UTF-8编码) |
|  **校验码**  |    CS    |    1     |                                                 |
|   **包尾**   |   0x16   |    1     |                                                 |
|              |          |          |                                                 |

终端应答

|      域      | **数据** | **长度** | **说明**             |
| :----------: | :------: | :------: | -------------------- |
|   **包头**   |   0x68   |    1     |                      |
|  **功能码**  |   0xB5   |    1     |                      |
| **载荷长度** |    n     |    2     |                      |
| **载荷实体** |          |    1     | FLAG1: 0X04          |
|              |          |    1     | FLAG2: 0X01          |
|              |          |    1     | 0x00 OK, other error |
|  **校验码**  |    CS    |    1     |                      |
|   **包尾**   |   0x16   |    1     |                      |
|              |          |          |                      |

### 0x3A-终端上传诊断数据

终端上传

|      域      | **数据** | **长度** | **说明**           |
| :----------: | :------: | :------: | ------------------ |
|   **包头**   |   0x68   |    1     |                    |
|  **功能码**  |   0x3a   |    1     |                    |
| **载荷长度** |    N     |    2     |                    |
| **载荷实体** |    N     |    1     | 类型               |
|              |          |    n     | 诊断数据(Table 10) |
|  **校验码**  |    CS    |          |                    |
|   **包尾**   |   0x16   |          |                    |

表10诊断数据说明

|    **类型**     | **长度** | **内容**                                                     |
| :-------------: | :------: | ------------------------------------------------------------ |
|    0x01 心率    |    1     | 心率值                                                       |
|    0x02 血压    |    2     | 1B收缩压+ 1B舒张压                                           |
|    0x03 血氧    |    1     | 血氧饱和度(0~100)                                            |
|    0x04 HRV     |    25    | 5B SDNN + 5B TP + 5B LF + 5B HF + 5B VLF（[计算方法](#_全天HRV(频率5分钟)_包类型0x10)） |
| 0x05 血液粘稠度 |    1     | 血液粘稠度                                                   |

### 0x3C-获取原始数据

**详情见《吾控健康原始数据协议文档》**

### 0x3D-标签终端配置

#### 声光报警器-类型0x01

**添加报警设备0x01**

APP请求

|      域      | **数据** | **长度** | **说明**                                                     |
| :----------: | :------: | :------: | ------------------------------------------------------------ |
|   **包头**   |   0x68   |    1     |                                                              |
|  **功能码**  |   0x3d   |    1     |                                                              |
| **载荷长度** |    n     |    2     |                                                              |
| **载荷实体** |          |    1     | 0x01(类型)                                                   |
|              |          |    1     | 0x01(功能)                                                   |
|              |          |    2     | 1B设备类型 + 1B设备标识                                      |
|              |          |    6     | 6B设备MAC                                                    |
|              |          |    1     | 广播数据B8字段中，报警字节位置 <br/>例广播数据: B8 AA BB CC  <br/>报警字节位置 0 -> AA <br/>报警字节位置 1 -> BB <br/>报警字节位置 2 -> CC <br/><br/>报警值(报警等级): <br/>0 -> 停止报警 <br/>1 -> 一级报警 <br/>2 -> 二级报警 <br/>3 -> 三级报警 |
|  **校验码**  |    CS    |    1     |                                                              |
|   **包尾**   |   0x16   |    1     |                                                              |
|              |          |          |                                                              |

终端应答

|      域      | **数据** | **长度** | **说明**             |
| :----------: | :------: | :------: | -------------------- |
|   **包头**   |   0x68   |    1     |                      |
|  **功能码**  |   0xBD   |    1     |                      |
| **载荷长度** |    n     |    2     |                      |
| **载荷实体** |          |    1     | 0x01(类型)           |
|              |          |    1     | 0x01(功能)           |
|              |          |    1     | 0x00 OK, other error |
|  **校验码**  |    CS    |    1     |                      |
|   **包尾**   |   0x16   |    1     |                      |
|              |          |          |                      |

添加报警设备 示例

```
APP下发 -> 68 3D 0B 00 01 01 [类型] [标识] [6B-MAC] 05 [CS] 16
终端响应 -> 68 BD 03 00 01 01 00 [CS] 16
```



**删除报警设备0x02**

APP请求

|      域      | **数据** | **长度** | **说明**                                    |
| :----------: | :------: | :------: | ------------------------------------------- |
|   **包头**   |   0x68   |    1     |                                             |
|  **功能码**  |   0x3D   |    1     |                                             |
| **载荷长度** |    n     |    2     |                                             |
| **载荷实体** |          |    1     | 0x01(类型)                                  |
|              |          |    1     | 0x02(功能) 若无后续数据则为清除所有设备操作 |
|              |          |    2     | 1B设备类型 + 1B设备标识                     |
|              |          |    6     | 6B设备MAC                                   |
|  **校验码**  |    CS    |    1     |                                             |
|   **包尾**   |   0x16   |    1     |                                             |
|              |          |          |                                             |

终端应答

|      域      | **数据** | **长度** | **说明**             |
| :----------: | :------: | :------: | -------------------- |
|   **包头**   |   0x68   |    1     |                      |
|  **功能码**  |   0xBD   |    1     |                      |
| **载荷长度** |    n     |    2     |                      |
| **载荷实体** |          |    1     | 0x01(类型)           |
|              |          |    1     | 0x02(功能)           |
|              |          |    1     | 0x00 OK, other error |
|  **校验码**  |    CS    |    1     |                      |
|   **包尾**   |   0x16   |    1     |                      |
|              |          |          |                      |

**查询报警设备0x03**

APP请求

|      域      | **数据** | **长度** | **说明**                |
| :----------: | :------: | :------: | ----------------------- |
|   **包头**   |   0x68   |    1     |                         |
|  **功能码**  |   0x3D   |    1     |                         |
| **载荷长度** |    n     |    2     |                         |
| **载荷实体** |          |    1     | 0x01(类型)              |
|              |          |    1     | 0x03(功能)              |
|              |          |    2     | 1B设备类型 + 1B设备标识 |
|              |          |    6     | 6B设备MAC               |
|  **校验码**  |    CS    |    1     |                         |
|   **包尾**   |   0x16   |    1     |                         |
|              |          |          |                         |

终端应答

|      域      | **数据** | **长度** | **说明**             |
| :----------: | :------: | :------: | -------------------- |
|   **包头**   |   0x68   |    1     |                      |
|  **功能码**  |   0xBD   |    1     |                      |
| **载荷长度** |    n     |    2     |                      |
| **载荷实体** |          |    1     | 0x01(类型)           |
|              |          |    1     | 0x03(功能)           |
|              |          |    1     | 0x00 OK, other error |
|  **校验码**  |    CS    |    1     |                      |
|   **包尾**   |   0x16   |    1     |                      |
|              |          |          |                      |

  
