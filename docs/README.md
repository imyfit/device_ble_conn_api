# 蓝牙终端可连接API


| 时间 | 备注 |
| :--: | :--- |
| ...  | ...  |

1. 本协议文档可能不是最新版本；
2. 本协议文档描述，吾控健康蓝牙终端设备API接口相关协议；
3. 开发者若需要硬件对接请联系销售人员,  https://www.imyfit.com ；
4. 若协议文档有更新，不再另行通知，强烈建议开发者到 https://imyfit.gitee.io 获取在线最新协议；
5. 若有疑问请到ISSUE区提出 https://gitee.com/imyfit/imyfit-issue 愿我们的付出对您的开发事半功倍。





## 扫描设备

从扫描的蓝牙设备中过滤出合法的设备，需要保证广播数据格式与指定格式匹配，合法设备可以根据下面的广播数据格式进行过滤：

> 标准广播数据格式：1B(lenght) + 1B(type) + nB(data)
>
> - **lenght**
>
>   数据长度，为 1B(type) + nB(data) 总长度
>
> - **type**
>
>   数据类型，值 0xFF 表示自定义数据类型
>
> - **data**
>
>   类型数据

```
########################
# 合法设备必须符合以下格式 #
########################

1. 广播数据格式, 自定义数据字段第一个字节为0xB8
   xx FF B8 xx xx xx ...

2. 响应广播数据格式, 0xB7后面数据为设备MAC小端序字节码 
   0B FF B6 xx xx B7 xx xx xx xx xx xx

注: 合法设备必须同时满足以上两个条件, 即 广播数据格式 与 响应数据格式 均符合以上描述
```

​	

​	

## 蓝牙服务

终端通信中用到的蓝牙服务如下表，服务为标准蓝牙服务，可对接Android、IOS与具有标准蓝牙的嵌入式平板/笔记本等。服务0xFFF0用于数据通信，协议的大部分数据都是通过该服务进行的。服务0x180D用于实时心率传输数据。

蓝牙协议数据交互服务，UUID：0xFFF0

| 特征值 | 可执行操作 | 备注                               |
| ------ | ---------- | ---------------------------------- |
| 0xFFF1 | notify     | 接收终端数据(必须保证notify被使能) |
| 0xFFF2 | write      | 向终端发送数据                     |

​	

心率服务，UUID：0x180D

| 特征值 | 可执行操作 | 备注                               |
| ------ | ---------- | ---------------------------------- |
| 0x2A37 | notify     | 接收心率数据(必须保证notify被使能) |
| 0x2A38 | notify     |                                    |

​	

​	

## 通信协议

协议规定蓝牙主机与终端从机0xFFF0服务通信协议中所有非单字节类型的数据，除特殊说明外均为**小端序**。主机接收端数据需要做数据**拼包**处理，否则可能出现接收不全问题。

​	

### **协议帧格式**

| 包头 (1B) | 功能码 (1B) | 载荷长度 (2B) | 载荷实体 (n*B) | 校验码 (1B) | 包尾 (1B) |
| --------- | ----------- | ------------- | -------------- | ----------- | --------- |
| 0x68      | …           | …             | …              | …           | 0x16      |

1. **包头**，固定：0x68。

2. **功能码**，各部分位含义如下表。部分功能码可能与该定义冲突，以实际为准。详细的功能码（也称为：功能码、功能协议）在后文详细阐述。

   功能码域

   | 7bit                                            | 6bit                          | [5:0]bit |
   | ----------------------------------------------- | ----------------------------- | -------- |
   | 表示方向： 0是主机向终端发送，1是终端向主机发送 | 表示异常位： 0是正常，1是异常 | 帧类型   |

   如果终端回复的功能码 异常位 置1，则载荷实体为异常响应数据，格式见[帧异常响应](# 帧异常响应)

   

3. **载荷长度**，为两个字节，低字节在前，表征**内容数据**域的字节长度。

4. **载荷实体**，具体的数据交互内容，在后文详细阐述。

5. **校验码**，将包头、功能码、载荷长度、内容数据所有字节数据进行相加取低8位的值。

   例：帧数据 [68 00 01 00 00 xx 16]，校验码 xx = (0x68 + 0x00 + 0x01 + 0x00 + 0x00) & 0xFF = (0x69) & 0xFF = 0x69

6. **包尾**，固定：0x16。

​	

**注：**协议帧最大长度为 **512Byte**，协议中所有涉及字符传输的编码均使用**UTF-8**编码（如JSON数据部分），并且字符数据的最后一字节值必须为 0x00（字符数据以 0 结尾）

​	

### 数据包超时重传策略

为保证通信的可靠和稳定性，必须要建立可靠的重传机制。通信的一方在信道空闲时，发送请求命令或者数据，若信道忙，则要等待信道空闲后，再发送请求或者数据，或者要抢占空闲信道间隙。 当通信的一方发送完请求帧后，若一段时间内没收到回应时，须重传该请求帧。一般重传3次即可，重传间隔在100ms ~ 500ms左右即可。

​	

### 帧异常响应

> 如无特殊说明，当响应的功能码异常位(bit6)置为 1 时，均使用如下的响应格式

​	

| 错误编码 | 编码含义                                       |
| -------- | ---------------------------------------------- |
| 0x01     | 不支持的功能码                                 |
| 0x02     | 不支持的指令码                                 |
| 0x03     | 数据不完整或格式错误                           |
| 0x04     | 无效的参数或配置                               |
| 0x05     | 无效的状态，一般为指令执行顺序错误等           |
| ...      |                                                |
| 0xC0     | 异常错误                                       |
| 0xEX     | 功能帧自定义响应错误码，错误码描述见功能帧详情 |

​	

参数表

| key  | type   | 描述       |
| ---- | ------ | ---------- |
| code | int    | 错误码。   |
| msg  | string | 错误描述。 |

```json
{
    "code":0,
    "msg":"error"
}
```

​	

终端响应

|              | 数据 | 长度 | 描述                                |
| :----------: | ---- | ---- | ----------------------------------- |
|   **帧头**   | 0x68 | 1    |                                     |
|  **功能码**  | xx   | 1    | 功能码异常位(bit6) 为 1             |
| **载荷长度** | xx   | 2    | 低字节先传                          |
| **载荷实体** | xx   | 1    | 指令码（若未下发指令码 则默认为 0） |
|              |      | xx   | JSON数据，见参数表                  |
|              |      | 1    | 0x00                                |
|  **校验码**  | CS   | 1    |                                     |
|   **帧尾**   | 0x16 | 1    |                                     |

​	

### 协议交互示例

> **来电提醒协议交互**
>
> 为了方便浏览，JSON数据部分使用字符展示（实际应为对应的字节码），载荷长度 和 校验码 均由用户自行计算，这里使用 xx 代替

```
# 开启提醒
主机 -> 68 01 xx xx 01 {"name":"Hello","number":"12345678900"} 00 xx 16

# 正常响应
终端 -> 68 81 xx xx 01 xx 16

# 异常响应
终端 -> 68 c1 xx xx 01 {"code":2,"msg":"content format error"} 00 xx 16
```

​	

​	

## 0x01 - 来电提醒

参数表

| key    | type   | 描述     |
| ------ | ------ | -------- |
| name   | string | 来电名称 |
| number | string | 来电号码 |

```json
{
    "name":"Hello",
    "number":"12345678900"
}
```

​	

### 开始提醒

App请求

|              | 数据 | 长度 | 描述                                   |
| :----------: | ---- | ---- | -------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                        |
|  **功能码**  | 0x01 | 1    |                                        |
| **载荷长度** | xx   | 2    | 低字节先传                             |
| **载荷实体** | xx   | 1    | 0x01（固定值）                         |
|              |      | xx   | JSON数据，见[参数表](#0x01 - 来电提醒) |
|              |      | 1    | 0x00                                   |
|  **校验码**  | CS   | 1    |                                        |
|   **帧尾**   | 0x16 | 1    |                                        |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x81 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x01（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

### 停止提醒

App请求

|              | 数据 | 长度 | 描述            |
| :----------: | ---- | ---- | --------------- |
|   **帧头**   | 0x68 | 1    |                 |
|  **功能码**  | 0x01 | 1    |                 |
| **载荷长度** | xx   | 2    | 低字节先传      |
| **载荷实体** | xx   | 1    | 0x02 （固定值） |
|  **校验码**  | CS   | 1    |                 |
|   **帧尾**   | 0x16 | 1    |                 |

​	

终端响应

|              | 数据 | 长度 | 描述            |
| :----------: | ---- | ---- | --------------- |
|   **帧头**   | 0x68 | 1    |                 |
|  **功能码**  | 0x81 | 1    |                 |
| **载荷长度** | xx   | 2    | 低字节先传      |
| **载荷实体** | xx   | 1    | 0x02 （固定值） |
|  **校验码**  | CS   | 1    |                 |
|   **帧尾**   | 0x16 | 1    |                 |

​	

​	

## 0x02 - 参数设置与读取

参数表

| key            | type   | 描述                                                |
| -------------- | ------ | --------------------------------------------------- |
| user_info      | object | 用户信息，见 [user_info](#user_info)                |
| health_monitor | object | 健康监测配置，见 [health_monitor](# health_monitor) |
| daily_goals    | object | 日常目标，见 [daily_goals](# daily_goals)           |
| ...            |        |                                                     |

​	

### 设置

App请求

|              | 数据 | 长度 | 描述                                         |
| :----------: | ---- | ---- | -------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                              |
|  **功能码**  | 0x02 | 1    |                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                   |
| **载荷实体** | xx   | 1    | 0x01（固定值）                               |
|              |      | xx   | JSON数据，见[参数表](#0x02 - 参数设置与读取) |
|              |      | 1    | 0x00                                         |
|  **校验码**  | CS   | 1    |                                              |
|   **帧尾**   | 0x16 | 1    |                                              |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x82 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x01（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

### 读取

参数表

| key     | type   | 描述                                                         |
| ------- | ------ | ------------------------------------------------------------ |
| request | string | 读取参数配置。见[参数配置表](0x02 - 参数设置与读取) 如："user_info" 等 |

​	

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x02 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x02（固定值）       |
|              |      | xx   | JSON数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述                                               |
| :----------: | ---- | ---- | -------------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                                    |
|  **功能码**  | 0x82 | 1    |                                                    |
| **载荷长度** | xx   | 2    | 低字节先传                                         |
| **载荷实体** | xx   | 1    | 0x02（固定值）                                     |
|              |      | xx   | 读取的数据，见[参数配置表](#0x02 - 参数设置与读取) |
|              |      | 1    | 0x00                                               |
|  **校验码**  | CS   | 1    |                                                    |
|   **帧尾**   | 0x16 | 1    |                                                    |

​	



### user_info

参数表

| key      | type   | 描述                                                        | 属性 |
| -------- | ------ | ----------------------------------------------------------- | ---- |
| name     | string | 用户名                                                      | 可选 |
| gender   | int    | 性别。0：男，1：女                                          | 可选 |
| height   | int    | 身高（CM）                                                  | 可选 |
| weight   | int    | 体重（KG）                                                  | 可选 |
| birthday | string | 出生日期。格式："yyyy-MM-dd"，如 "1999-01-01"、"2000-01-01" | 可选 |

​	

### health_monitor

参数表

| key          | type   | 描述                                                         | 属性 |
| ------------ | ------ | ------------------------------------------------------------ | ---- |
| spo2_monitor | string | 血氧监测配置："period,onoff"<br />period - 血氧连续监测周期（5/10/15/30分钟）<br />onoff - 血氧连续监测开关（0 关闭，1 开启） | 可选 |
| bp_monitor   | string | 血压监测配置："period,onoff"<br />period - 血压连续监测周期（5/10/15/30分钟）<br />onoff - 血压连续监测开关（0 关闭，1 开启） | 可选 |
| hrv_monitor  | string | HRV监测配置："period,onoff"<br />period - HRV连续监测周期（5/10/15/30分钟）<br />onoff - HRV连续监测开关（0 关闭，1 开启） | 可选 |

​	

### daily_goals

参数表

| key                  | type | 描述                         | 属性 |
| -------------------- | ---- | ---------------------------- | ---- |
| steps                | int  | 每日计步目标                 | 可选 |
| calories             | int  | 每日卡路里目标（Kcal）       | 可选 |
| distance             | int  | 每日里程目标（meter）        | 可选 |
| sleep                | int  | 每日睡眠目标（mintue）       | 可选 |
| water_intake         | int  | 每日饮水量目标（milliliter） | 可选 |
| respiratory_training | int  | 每日呼吸训练目标（次）       | 可选 |

​	

​	

​	

## 0x03 - 短消息提醒

> 仅 Android 端需要实现该协议

### 消息类型

| 类型      | 描述      |
| --------- | --------- |
| wechat    | 微信      |
| qq        | QQ        |
| sms       | 短信      |
| facebook  | Facebook  |
| skype     | Skype     |
| twitter   | Twitter   |
| whatsapp  | WhatsAPP  |
| line      | Line      |
| instagram | Instagram |

​	

### 控制

#### 设置

参数表

| key                    | type | 描述                                                      |
| ---------------------- | ---- | --------------------------------------------------------- |
| [消息类型](# 消息类型) | bool | ture - 开启此类型消息提醒<br />false - 关闭此类型消息提醒 |

​	

App请求

|              | 数据 | 长度 | 描述                                           |
| :----------: | ---- | ---- | ---------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                                |
|  **功能码**  | 0x03 | 1    |                                                |
| **载荷长度** | xx   | 2    | 低字节先传                                     |
| **载荷实体** | xx   | 1    | 0x01（固定值）                                 |
|              |      | xx   | 消息控制数据，见上参数表（一次可设置多个类型） |
|              |      | 1    | 0x00                                           |
|  **校验码**  | CS   | 1    |                                                |
|   **帧尾**   | 0x16 | 1    |                                                |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x83 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x01（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

#### 读取

参数表

| key                    | type | 描述                                                      |
| ---------------------- | ---- | --------------------------------------------------------- |
| [消息类型](# 消息类型) | bool | ture - 开启此类型消息提醒<br />false - 关闭此类型消息提醒 |

​	

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x03 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x02（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述                                                   |
| :----------: | ---- | ---- | ------------------------------------------------------ |
|   **帧头**   | 0x68 | 1    |                                                        |
|  **功能码**  | 0x83 | 1    |                                                        |
| **载荷长度** | xx   | 2    | 低字节先传                                             |
| **载荷实体** | xx   | 1    | 0x02（固定值）                                         |
|              |      | xx   | 消息控制数据，见上参数表（终端上传所有支持的消息类型） |
|              |      | 1    | 0x00                                                   |
|  **校验码**  | CS   | 1    |                                                        |
|   **帧尾**   | 0x16 | 1    |                                                        |

​	

​	

### 添加

> 注意需要先通过消息提醒 控制 指令打开需要的消息类型，才能触发对应类型的消息提醒

参数表

| key       | type   | 描述                                               |
| --------- | ------ | -------------------------------------------------- |
| id        | int64  | 消息唯一ID。(一般使用当前时间毫秒时间戳作为唯一ID) |
| timestamp | int64  | 消息提醒的本地时间戳。                             |
| type      | string | 消息类型。见 [消息类型表](# 消息类型)              |
| title     | string | 消息标题。最大长度 **48Byte** (约为16个汉字)       |
| content   | string | 消息内容。最大长度 **320Byte** (约为106个汉字)     |

​	

App请求

|              | 数据 | 长度 | 描述               |
| :----------: | ---- | ---- | ------------------ |
|   **帧头**   | 0x68 | 1    |                    |
|  **功能码**  | 0x03 | 1    |                    |
| **载荷长度** | xx   | 2    | 低字节先传         |
| **载荷实体** | xx   | 1    | 0x03（固定值）     |
|              |      | xx   | JSON数据，见参数表 |
|              |      | 1    | 0x00               |
|  **校验码**  | CS   | 1    |                    |
|   **帧尾**   | 0x16 | 1    |                    |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x83 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x03（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

### 删除

参数表

| key  | type  | 描述         |
| ---- | ----- | ------------ |
| id   | int64 | 消息唯一ID。 |

​	

App请求

|              | 数据 | 长度 | 描述               |
| :----------: | ---- | ---- | ------------------ |
|   **帧头**   | 0x68 | 1    |                    |
|  **功能码**  | 0x03 | 1    |                    |
| **载荷长度** | xx   | 2    | 低字节先传         |
| **载荷实体** | xx   | 1    | 0x04（固定值）     |
|              |      | xx   | JSON数据，见参数表 |
|              |      | 1    | 0x00               |
|  **校验码**  | CS   | 1    |                    |
|   **帧尾**   | 0x16 | 1    |                    |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x83 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x04（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	



### 删除所有

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x03 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x05（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x83 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x05（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

​	



## 0x04 - 时间同步

参数表

| key       | type  | 描述                               | 属性 |
| --------- | ----- | ---------------------------------- | ---- |
| timestamp | int64 | UTC时间戳                          | 可选 |
| timezone  | int   | 当前时区，默认为东8区(+8 北京时间) | 可选 |

​	

### 设置

App请求

|              | 数据 | 长度 | 描述                                    |
| :----------: | ---- | ---- | --------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                         |
|  **功能码**  | 0x04 | 1    |                                         |
| **载荷长度** | xx   | 2    | 低字节先传                              |
| **载荷实体** | xx   | 1    | 0x01（固定值）                          |
|              |      | xx   | JSON数据，见[参数表](# 0x04 - 时间同步) |
|              |      | 1    | 0x00                                    |
|  **校验码**  | CS   | 1    |                                         |
|   **帧尾**   | 0x16 | 1    |                                         |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x84 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x01（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

### 获取

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x04 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x02（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述                                    |
| :----------: | ---- | ---- | --------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                         |
|  **功能码**  | 0x84 | 1    |                                         |
| **载荷长度** | xx   | 2    | 低字节先传                              |
| **载荷实体** | xx   | 1    | 0x02（固定值）                          |
|              |      | xx   | JSON数据，见[参数表](# 0x04 - 时间同步) |
|              |      | 1    | 0x00                                    |
|  **校验码**  | CS   | 1    |                                         |
|   **帧尾**   | 0x16 | 1    |                                         |

​	

​	

​	

## 0x05 - 实时数据

参数表

| key       | type   | 描述                                |
| --------- | ------ | ----------------------------------- |
| battery   | int    | 电量百分比                          |
| steps     | int    | 步数                                |
| calories  | int    | 卡路里（Kcal）                      |
| distance  | int    | 里程（meters）                      |
| heart     | int    | 心率值                              |
| rri       | int    | 心跳间隔（ms）                      |
| spo2      | int    | 血氧                                |
| bp        | object | 血压，见 [bp参数表](# bp)           |
| temp_hand | float  | 体表温度/手臂温度（摄氏度℃）        |
| temp_env  | float  | 环境温度（摄氏度℃）                 |
| wear      | bool   | 佩戴状态（true：戴上，false：脱下） |
| sleep     | object | 睡眠数据，见 [sleep参数表](# sleep) |

注：终端仅上传支持的参数key

​	

#### 获取数据

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x05 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x01（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述                                        |
| :----------: | ---- | ---- | ------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                             |
|  **功能码**  | 0x85 | 1    |                                             |
| **载荷长度** | xx   | 2    | 低字节先传                                  |
| **载荷实体** | xx   | 1    | 0x01（固定值）                              |
|              |      | xx   | JSON数据，见[参数表](# 0x04 - 获取实时数据) |
|              |      | 1    | 0x00                                        |
|  **校验码**  | CS   | 1    |                                             |
|   **帧尾**   | 0x16 | 1    |                                             |

​	

#### bp

参数表

| key  | type | 描述   |
| ---- | ---- | ------ |
| sys  | int  | 收缩压 |
| dia  | int  | 舒张压 |

​	

#### sleep

参数表

| key    | type | 描述                             |
| ------ | ---- | -------------------------------- |
| status | int  | 当前睡眠状态，0：未睡眠，1：睡眠 |
| deep   | int  | 深睡时间（分钟）                 |
| light  | int  | 浅睡时间（分钟）                 |
| rem    | int  | 眼动睡眠时间（分钟）             |
| sober  | int  | 清醒时间（分钟）                 |

​	

​	

​	

## 0x06 - SOS呼救

### 开启呼救

终端上传

|              | 数据 | 长度 | 描述                                                         |
| :----------: | ---- | ---- | ------------------------------------------------------------ |
|   **帧头**   | 0x68 | 1    |                                                              |
|  **功能码**  | 0x86 | 1    |                                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                                   |
| **载荷实体** | xx   | 1    | 0x01（固定值）                                               |
|              |      | 1    | 呼救原因：<br />0 - 主动呼救（按键触发等）<br />1 - 跌倒呼救（跌倒后系统自动触发呼救） |
|  **校验码**  | CS   | 1    |                                                              |
|   **帧尾**   | 0x16 | 1    |                                                              |



App响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x06 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x01（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

### 取消呼救

终端上传

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x86 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x02（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

App响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x06 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x02（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

## 0x07 - 运动

### 运动类型

| 一般运动     | 描述          |
| ------------ | ------------- |
| 1001         | 户外徒步/健走 |
| 1002         | 户外跑步      |
| 1003         | 室内跑步      |
| 1004         | 跑步机        |
| 1005         | 登山          |
| 1006         | 爬楼          |
| **游泳运动** |               |
| 2001         | 室内游泳      |
| 2002         | 户外游泳      |
| **骑行运动** |               |
| 3001         | 户外骑行      |
| **自由运动** |               |
| 5001         | 自由训练      |
| **器械运动** |               |
| 6001         | 跳绳          |

​	

​	

### 运动参数

#### 一般运动（1001 ~ 1xxx）

参数表

| key            | type  | 描述                         |
| -------------- | ----- | ---------------------------- |
| steps          | int   | 步数                         |
| distance       | int   | 距离（meters）               |
| calories       | int   | 卡路里（Kcal）               |
| step_freq_avg  | int   | 平均步频（steps/mintue）     |
| step_freq_max  | int   | 最大步频                     |
| step_len_avg   | int   | 平均步长（cm）               |
| pace_avg       | float | 平均配速（minutes/km）       |
| pace_max       | float | 最高配速（数值最小的配速值） |
| hr_avg         | int   | 平均心率                     |
| hr_max         | int   | 最大心率                     |
| vo2max         | float | 最大摄氧量（ml/kg/min）      |
| floors_up      | int   | 爬升楼层（floors）           |
| floors_down    | int   | 下降楼层                     |
| elevation_up   | int   | 爬升高度（meters）           |
| elevation_down | int   | 下降高度                     |

​	

#### 游泳运动（2001 ~ 2xxx）

参数表

| key             | type  | 描述                                                         |
| --------------- | ----- | ------------------------------------------------------------ |
| total_strokes   | int   | 总划水次数                                                   |
| calories        | int   | 总卡路里（Kcal）                                             |
| distance        | int   | 总距离（meters）                                             |
| swim_time       | int   | 总游泳时间（seconds）                                        |
| stroke_freq_avg | int   | 平均划水频率（strokes/minute）                               |
| stroke_freq_max | int   | 最大划水频率                                                 |
| pace_avg        | float | 平均配速（minutes/km）                                       |
| pace_max        | float | 最大配速                                                     |
| hr_avg          | int   | 平均心率                                                     |
| hr_max          | int   | 最大心率                                                     |
| swim_type       | int   | 主要泳姿：<br />0 - 未知<br />1 - 自由泳<br />2 - 蛙泳<br />3 - 仰泳<br />4 - 蝶泳<br />5 - 混合泳 |

​	

#### 骑行运动（3001 ~ 3xxx）

参数表

| key            | type  | 描述                |
| -------------- | ----- | ------------------- |
| distance       | int   | 总距离（meters）    |
| calories       | int   | 总卡路里（Kcal）    |
| hr_avg         | int   | 平均心率            |
| hr_max         | int   | 最大心率            |
| speed_avg      | float | 平均速度（km/hour） |
| speed_max      | float | 最大速度            |
| elevation_up   | int   | 爬升高度（meters）  |
| elevation_down | int   | 下降高度（meters）  |

​	

#### 自由运动（5001 ~ 5xxx）

参数表

| key      | type | 描述             |
| -------- | ---- | ---------------- |
| calories | int  | 总卡路里（Kcal） |
| hr_avg   | int  | 平均心率         |
| hr_max   | int  | 最大心率         |

​	

#### 器械运动（6001 ~ 6xxx）

参数表

| key      | type | 描述                          |
| -------- | ---- | ----------------------------- |
| counts   | int  | 累计次数（如累计跳绳次数）    |
| calories | int  | 总卡路里（Kcal）              |
| avg_freq | int  | 平均触发频率（counts/minute） |
| avg_hr   | int  | 平均心率                      |
| max_hr   | int  | 最大心率                      |

​	

​	

### 运动事件

#### 开始

> 在运动开始时终端主动上传

参数表

| key       | type  | 描述                   |
| --------- | ----- | ---------------------- |
| type      | int   | [运动类型](# 运动类型) |
| starttime | int64 | 运动开始本地时间戳     |

​	

终端上传

|              | 数据 | 长度 | 描述                             |
| :----------: | ---- | ---- | -------------------------------- |
|   **帧头**   | 0x68 | 1    |                                  |
|  **功能码**  | 0x87 | 1    |                                  |
| **载荷长度** | xx   | 2    | 低字节先传                       |
| **载荷实体** | xx   | 1    | 0x81（固定值）                   |
|              |      | xx   | JSON数据，见[参数表](# 运动事件) |
|              |      | 1    | 0x00                             |
|  **校验码**  | CS   | 1    |                                  |
|   **帧尾**   | 0x16 | 1    |                                  |

​	

​	

#### 停止

> 在运动结束时终端主动上传

参数表

| key       | type  | 描述                   |
| --------- | ----- | ---------------------- |
| type      | int   | [运动类型](# 运动类型) |
| starttime | int64 | 运动开始本地时间戳     |
| endtime   | int64 | 运动结束本地时间戳     |
| duration  | int   | 运动持续时间           |

​	

终端上传

|              | 数据 | 长度 | 描述                             |
| :----------: | ---- | ---- | -------------------------------- |
|   **帧头**   | 0x68 | 1    |                                  |
|  **功能码**  | 0x87 | 1    |                                  |
| **载荷长度** | xx   | 2    | 低字节先传                       |
| **载荷实体** | xx   | 1    | 0x82（固定值）                   |
|              |      | xx   | JSON数据，见[参数表](# 运动事件) |
|              |      | 1    | 0x00                             |
|  **校验码**  | CS   | 1    |                                  |
|   **帧尾**   | 0x16 | 1    |                                  |



​	

### 运动设置

#### 设置

参数表

| key         | type | 描述                                                         | 属性 |
| ----------- | ---- | ------------------------------------------------------------ | ---- |
| hr_warn_val | int  | 运动心率告警值，大于该值将触发告警<br />(最小: 120，最大: 200，取值为: 120、125、130、...)<br />0 - 关闭告警 | 可选 |

​	

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x07 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0xA1（固定值）       |
|              |      | xx   | JSON数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x87 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0xA1（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

#### 读取

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x07 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0xA2（固定值）       |
|              |      | xx   | JSON数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述                             |
| :----------: | ---- | ---- | -------------------------------- |
|   **帧头**   | 0x68 | 1    |                                  |
|  **功能码**  | 0x87 | 1    |                                  |
| **载荷长度** | xx   | 2    | 低字节先传                       |
| **载荷实体** | xx   | 1    | 0xA2（固定值）                   |
|              |      | xx   | JSON数据，见[参数表](# 运动设置) |
|              |      | 1    | 0x00                             |
|  **校验码**  | CS   | 1    |                                  |
|   **帧尾**   | 0x16 | 1    |                                  |

​	



### 获取运动记录

> 获取本地的所有历史运动记录数据

参数表

| key       | type   | 描述                                 |
| --------- | ------ | ------------------------------------ |
| id        | int64  | 运动记录ID                           |
| starttime | int64  | 运动开始本地时间戳                   |
| duration  | int    | 运动时长（second）                   |
| type      | int    | [运动类型](# 运动类型)               |
| data      | object | 运动数据，见[运动参数表](# 运动参数) |

​	

App请求

|              | 数据 | 长度 | 描述                                           |
| :----------: | ---- | ---- | ---------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                                |
|  **功能码**  | 0x07 | 1    |                                                |
| **载荷长度** | xx   | 2    | 低字节先传                                     |
| **载荷实体** | xx   | 1    | 0x01（固定值）                                 |
|              |      | 1    | 运动记录索引值（索引值起始值为1）              |
|              |      | ...  | 运动记录索引值（可选），可请求一个或多个数据包 |
|  **校验码**  | CS   | 1    |                                                |
|   **帧尾**   | 0x16 | 1    |                                                |

> 运动记录索引值说明：
>
> 1 (最近一次运动记录)，2，3，...，n-2，n-1，n (最早的运动记录)

​	

终端响应

|              | 数据 | 长度 | 描述                                   |
| :----------: | ---- | ---- | -------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                        |
|  **功能码**  | 0x87 | 1    |                                        |
| **载荷长度** | xx   | 2    | 低字节先传                             |
| **载荷实体** | xx   | 1    | 0x01（固定值）                         |
|              |      | 1    | 运动记录索引值                         |
|              |      | 1    | 运动记录总数（索引值无效时无后续数据） |
|              |      | xx   | 运动数据，见[参数表](# 获取运动记录)   |
|              |      | 1    | 0x00                                   |
|  **校验码**  | CS   | 1    |                                        |
|   **帧尾**   | 0x16 | 1    |                                        |

​	

​	

### 删除运动记录

App请求

|              | 数据 | 长度 | 描述                     |
| :----------: | ---- | ---- | ------------------------ |
|   **帧头**   | 0x68 | 1    |                          |
|  **功能码**  | 0x07 | 1    |                          |
| **载荷长度** | xx   | 2    | 低字节先传               |
| **载荷实体** | xx   | 1    | 0x02（固定值）           |
|              |      | 8    | 运动记录ID（低字节先传） |
|  **校验码**  | CS   | 1    |                          |
|   **帧尾**   | 0x16 | 1    |                          |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x87 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x02（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

异常响应

| 错误编码 | 编码含义                 |
| -------- | ------------------------ |
| 0xE1     | 运动记录ID无效 或 不存在 |

​	

​	

### 获取运动轨迹

> 仅部分户外运动模式才有运动轨迹记录

App请求

|              | 数据 | 长度 | 描述                                                 |
| :----------: | ---- | ---- | ---------------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                                      |
|  **功能码**  | 0x07 | 1    |                                                      |
| **载荷长度** | xx   | 2    | 低字节先传                                           |
| **载荷实体** | xx   | 1    | 0x10（固定值）                                       |
|              |      | 8    | 运动记录ID（低字节先传）                             |
|              |      | 2    | 轨迹数据包索引值（索引值起始值为1，低字节先传）      |
|              |      | ...  | 轨迹数据包索引值（可选），可请求一个或多个索引数据包 |
|  **校验码**  | CS   | 1    |                                                      |
|   **帧尾**   | 0x16 | 1    |                                                      |

​	

终端响应

|              | 数据 | 长度 | 描述                                      |
| :----------: | ---- | ---- | ----------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                           |
|  **功能码**  | 0x87 | 1    |                                           |
| **载荷长度** | xx   | 2    | 低字节先传                                |
| **载荷实体** | xx   | 1    | 0x10（固定值）                            |
|              |      | 8    | 运动记录ID（低字节先传）                  |
|              |      | 2    | 轨迹数据包索引值                          |
|              |      | 2    | 轨迹数据包总数（索引值无效时无后续数据）  |
|              |      | 8    | 轨迹数据：4B(经度 x 1e6) + 4B(纬度 x 1e6) |
|              |      | 8    | 轨迹数据：4B(经度 x 1e6) + 4B(纬度 x 1e6) |
|              |      | ...  | ...                                       |
|  **校验码**  | CS   | 1    |                                           |
|   **帧尾**   | 0x16 | 1    |                                           |

异常响应

| 错误编码 | 编码含义                           |
| -------- | ---------------------------------- |
| 0xE1     | 运动记录ID无效 或 不存在           |
| 0xE2     | 该类型运动不支持 或 未产生运动轨迹 |

​	

​	

​	

​	

## 0x08 - 查找功能

### 寻找设备

> App向终端发送寻找设备指令，设备收到指令后响应并触发特定的提示功能，如：震动、屏闪、响铃等，直到App发送停止指令

#### 开启

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x08 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x11（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x88 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x11（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

#### 停止

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x08 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x12（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x88 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x12（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

### 寻找手机

> 终端发送寻找手机指令，手机收到指令后响应并触发特定的提示功能，如：震动、屏闪、响铃等，直到终端发送停止指令

#### 开启

终端请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x08 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x21（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

App响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x88 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x21（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

#### 停止

终端请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x08 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x22（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

App响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x88 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x22（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

​	

## 0x09 - 提醒功能

### 闹铃提醒

#### 设置闹铃

参数表

| key   | type   | 描述                                                         |
| ----- | ------ | ------------------------------------------------------------ |
| id    | int64  | 闹钟ID，使用闹钟添加时刻的毫秒时间戳作为唯一ID（当ID不存在时添加新的闹钟，存在时替换旧的闹钟配置） |
| time  | string | 闹钟时间："hh:mm"（本地时间）                                |
| week  | int    | 重复时间：<br />bit[0] - 每周日<br />bit[1] - 每周一<br />bit[2] - 每周二<br />bit[3] - 每周三<br />bit[4] - 每周四<br />bit[5] - 每周五<br />bit[6] - 每周六 |
| onoff | bool   | 闹钟开关，ture：开启，false：关闭                            |

​	

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x09 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x11（固定值）       |
|              |      | xx   | 闹钟数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x89 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x11（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

异常响应

| 错误编码 | 编码含义                   |
| -------- | -------------------------- |
| 0xE1     | 闹钟已满，无法添加新的闹钟 |



​	

​	

#### 获取闹铃

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x09 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x12（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

参数表

| key    | type           | 描述                                     |
| ------ | -------------- | ---------------------------------------- |
| count  | int            | 本地闹钟数量                             |
| alarms | array [object] | 闹钟列表，参数见[闹钟参数表](# 设置闹铃) |

终端响应

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x89 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x12（固定值）       |
|              |      | xx   | 闹钟数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

​	

#### 删除闹铃

参数表

| key  | type  | 描述   |
| ---- | ----- | ------ |
| id   | int64 | 闹钟ID |

​	

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x09 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x13（固定值）       |
|              |      | xx   | 闹钟数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x89 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x13（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

### 用药提醒

#### 设置提醒

参数表

| key     | type          | 描述                                                         |
| ------- | ------------- | ------------------------------------------------------------ |
| id      | int64         | 用药提醒ID，使用提醒添加时刻的毫秒时间戳作为唯一ID（当ID不存在时添加新的提醒，存在时替换旧的提醒配置） |
| date    | string        | 提醒日期："yyyy-MM-dd"（本地时间）                           |
| times   | array[string] | 提醒时刻：["hh:mm","hh:mm",...]，最大支持 6个时刻设置，当时钟经过该时刻时会触发提醒 |
| repeats | array[int]    | 重复提醒日期，为提醒日期向后推的间隔天数，最大可设置 31 个日期。<br />**示例**：<br />提醒日期：2018-01-01<br />重复提醒日期为：[1,2,4]<br />则重复提醒的时间为：<br />2018-01-01 + 1 => 2018-01-02<br />2018-01-01 + 2 => 2018-01-03<br />2018-01-01 + 4 => 2018-01-05 |
| content | object        | 提醒内容，见下 **content** 参数表                            |
| onoff   | bool          | 提醒开关，ture：开启，false：关闭                            |

​	

**content** 参数表

| key   | type   | 描述     |
| ----- | ------ | -------- |
| name  | string | 药品名称 |
| notes | string | 备注     |

​	

App请求

|              | 数据 | 长度 | 描述                     |
| :----------: | ---- | ---- | ------------------------ |
|   **帧头**   | 0x68 | 1    |                          |
|  **功能码**  | 0x09 | 1    |                          |
| **载荷长度** | xx   | 2    | 低字节先传               |
| **载荷实体** | xx   | 1    | 0x21（固定值）           |
|              |      | xx   | 用药提醒数据，见上参数表 |
|              |      | 1    | 0x00                     |
|  **校验码**  | CS   | 1    |                          |
|   **帧尾**   | 0x16 | 1    |                          |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x89 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x21（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

异常响应

| 错误编码 | 编码含义                   |
| -------- | -------------------------- |
| 0xE1     | 提醒已满，无法添加新的提醒 |

​	

​	

#### 获取提醒

App请求

|              | 数据 | 长度 | 描述                                               |
| :----------: | ---- | ---- | -------------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                                    |
|  **功能码**  | 0x09 | 1    |                                                    |
| **载荷长度** | xx   | 2    | 低字节先传                                         |
| **载荷实体** | xx   | 1    | 0x22（固定值）                                     |
|              |      | 1    | 用药提醒数据索引值（索引值起始值为1）              |
|              |      | ...  | 用药提醒数据索引值（可选），可请求一个或多个数据包 |
|  **校验码**  | CS   | 1    |                                                    |
|   **帧尾**   | 0x16 | 1    |                                                    |

​	

终端响应

|              | 数据 | 长度 | 描述                                         |
| :----------: | ---- | ---- | -------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                              |
|  **功能码**  | 0x89 | 1    |                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                   |
| **载荷实体** | xx   | 1    | 0x22（固定值）                               |
|              |      | 1    | 用药提醒数据索引值                           |
|              |      | 1    | 用药提醒数据包总数（索引值无效时无后续数据） |
|              |      | xx   | 用药提醒数据，见[参数表](# 用药提醒)         |
|              |      | 1    | 0x00                                         |
|  **校验码**  | CS   | 1    |                                              |
|   **帧尾**   | 0x16 | 1    |                                              |

​	

​	

#### 删除提醒

参数表

| key  | type  | 描述       |
| ---- | ----- | ---------- |
| id   | int64 | 用药提醒ID |

​	

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x09 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x23（固定值）       |
|              |      | xx   | JSON数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x89 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x23（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

### 自定义提醒

#### 设置提醒

参数表

| key     | type   | 描述                                                         |
| ------- | ------ | ------------------------------------------------------------ |
| id      | int64  | 自定义提醒ID，使用提醒添加时刻的毫秒时间戳作为唯一ID（当ID不存在时添加新的提醒，存在时替换旧的提醒配置） |
| time    | string | 提醒时间："yyyy-MM-dd hh:mm"（本地时间）                     |
| content | string | 提醒内容                                                     |
| onoff   | bool   | 提醒开关，ture：开启，false：关闭                            |

​	

App请求

|              | 数据 | 长度 | 描述                       |
| :----------: | ---- | ---- | -------------------------- |
|   **帧头**   | 0x68 | 1    |                            |
|  **功能码**  | 0x09 | 1    |                            |
| **载荷长度** | xx   | 2    | 低字节先传                 |
| **载荷实体** | xx   | 1    | 0x31（固定值）             |
|              |      | xx   | 自定义提醒数据，见上参数表 |
|              |      | 1    | 0x00                       |
|  **校验码**  | CS   | 1    |                            |
|   **帧尾**   | 0x16 | 1    |                            |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x89 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x31（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

异常响应

| 错误编码 | 编码含义                   |
| -------- | -------------------------- |
| 0xE1     | 提醒已满，无法添加新的提醒 |

​	

​	

#### 获取提醒

App请求

|              | 数据 | 长度 | 描述                                                 |
| :----------: | ---- | ---- | ---------------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                                      |
|  **功能码**  | 0x09 | 1    |                                                      |
| **载荷长度** | xx   | 2    | 低字节先传                                           |
| **载荷实体** | xx   | 1    | 0x32（固定值）                                       |
|              |      | 1    | 自定义提醒数据索引值（索引值起始值为1）              |
|              |      | ...  | 自定义提醒数据索引值（可选），可请求一个或多个数据包 |
|  **校验码**  | CS   | 1    |                                                      |
|   **帧尾**   | 0x16 | 1    |                                                      |

​	

终端响应

|              | 数据 | 长度 | 描述                                           |
| :----------: | ---- | ---- | ---------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                                |
|  **功能码**  | 0x89 | 1    |                                                |
| **载荷长度** | xx   | 2    | 低字节先传                                     |
| **载荷实体** | xx   | 1    | 0x32（固定值）                                 |
|              |      | 1    | 自定义提醒数据索引值                           |
|              |      | 1    | 自定义提醒数据包总数（索引值无效时无后续数据） |
|              |      | xx   | 自定义提醒数据，见[参数表](# 自定义提醒)       |
|              |      | 1    | 0x00                                           |
|  **校验码**  | CS   | 1    |                                                |
|   **帧尾**   | 0x16 | 1    |                                                |

​	

​	

#### 删除提醒

参数表

| key  | type  | 描述       |
| ---- | ----- | ---------- |
| id   | int64 | 用药提醒ID |

​	

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x09 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x33（固定值）       |
|              |      | xx   | JSON数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x89 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x33（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

### 防丢提醒

> 防丢提醒一般用于防止用户忘记携带手机，将手机落在家里或办公室，当手机与终端连接突然段开时，在指定延时后将会通过震动或弹窗的方式提醒用户

#### 设置提醒

参数表

| key   | type | 描述                                                         |
| ----- | ---- | ------------------------------------------------------------ |
| delay | int  | 提醒延时（断开连接持续时间，如果超出该时间还未重新连接上，则发出弹窗提醒），单位：秒 |
| onoff | bool | 提醒开关，ture：开启，false：关闭                            |

​	

App请求

|              | 数据 | 长度 | 描述                     |
| :----------: | ---- | ---- | ------------------------ |
|   **帧头**   | 0x68 | 1    |                          |
|  **功能码**  | 0x09 | 1    |                          |
| **载荷长度** | xx   | 2    | 低字节先传               |
| **载荷实体** | xx   | 1    | 0x41（固定值）           |
|              |      | xx   | 防丢提醒数据，见上参数表 |
|              |      | 1    | 0x00                     |
|  **校验码**  | CS   | 1    |                          |
|   **帧尾**   | 0x16 | 1    |                          |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x89 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x41（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

#### 获取提醒

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x09 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x42（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述                                 |
| :----------: | ---- | ---- | ------------------------------------ |
|   **帧头**   | 0x68 | 1    |                                      |
|  **功能码**  | 0x89 | 1    |                                      |
| **载荷长度** | xx   | 2    | 低字节先传                           |
| **载荷实体** | xx   | 1    | 0x42（固定值）                       |
|              |      | xx   | 防丢提醒配置，见[参数表](# 防丢提醒) |
|              |      | 1    | 0x00                                 |
|  **校验码**  | CS   | 1    |                                      |
|   **帧尾**   | 0x16 | 1    |                                      |

​	

​	

### 健康提醒

​	

#### 提醒类型

| code | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| 0x01 | **计步提醒**<br />当提醒时刻到来时，若当前计步未达到设定的目标值，则发起提醒 |
| 0x02 | **睡眠提醒**<br />当提醒时刻到来时，若当前睡眠时长未达到设定的目标值，则发起提醒 |
| 0x03 | **呼吸训练提醒**<br />当提醒时刻到来时，若当前呼吸训练次数未达到设定的目标值，则发起提醒 |
| 0x04 | **早睡提醒**<br />当提醒时刻到来时，发起早睡提醒             |
| 0x05 | **喝水提醒**<br />当提醒时刻到来时，若当前饮水量未达到设定的目标值，则发起提醒 |
| 0x06 | **血压测量提醒**<br />当提醒时刻到来时，发起早睡提醒         |
| 0x07 | **血氧测量提醒**<br />当提醒时刻到来时，发起早睡提醒         |
| 0x08 | **体重测量提醒**<br />当提醒时刻到来时，发起早睡提醒         |

​	

​	

#### 设置提醒

参数表

| key   | type          | 描述                                                         |
| ----- | ------------- | ------------------------------------------------------------ |
| id    | int64         | 健康提醒ID，使用提醒添加时刻的毫秒时间戳作为唯一ID（当ID不存在时添加新的提醒，存在时替换旧的提醒） |
| type  | int           | 提醒类型                                                     |
| times | array[string] | 提醒时刻：["hh:mm","hh:mm",...]，最大支持 3个时刻设置，当时钟经过该时刻时会触发提醒 |
| week  | int           | 重复时间：<br />bit[0] - 每周日<br />bit[1] - 每周一<br />bit[2] - 每周二<br />bit[3] - 每周三<br />bit[4] - 每周四<br />bit[5] - 每周五<br />bit[6] - 每周六 |
| onoff | bool          | 提醒开关，ture：开启，false：关闭                            |

​	

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x09 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x51（固定值）       |
|              |      | xx   | 提醒数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x89 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x51（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

异常响应

| 错误编码 | 编码含义                       |
| -------- | ------------------------------ |
| 0xE1     | 提醒队列已满，无法添加新的提醒 |

​	

​	

#### 获取提醒

App请求

|              | 数据 | 长度 | 描述                                               |
| :----------: | ---- | ---- | -------------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                                    |
|  **功能码**  | 0x09 | 1    |                                                    |
| **载荷长度** | xx   | 2    | 低字节先传                                         |
| **载荷实体** | xx   | 1    | 0x52（固定值）                                     |
|              |      | 1    | 健康提醒数据索引值（索引值起始值为1）              |
|              |      | ...  | 健康提醒数据索引值（可选），可请求一个或多个数据包 |
|  **校验码**  | CS   | 1    |                                                    |
|   **帧尾**   | 0x16 | 1    |                                                    |

​	

终端响应

|              | 数据 | 长度 | 描述                                         |
| :----------: | ---- | ---- | -------------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                              |
|  **功能码**  | 0x89 | 1    |                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                   |
| **载荷实体** | xx   | 1    | 0x52（固定值）                               |
|              |      | 1    | 健康提醒数据索引值                           |
|              |      | 1    | 健康提醒数据包总数（索引值无效时无后续数据） |
|              |      | xx   | 健康提醒数据，见**设置提醒**参数表           |
|              |      | 1    | 0x00                                         |
|  **校验码**  | CS   | 1    |                                              |
|   **帧尾**   | 0x16 | 1    |                                              |

​	

​	

#### 删除提醒

参数表

| key  | type  | 描述       |
| ---- | ----- | ---------- |
| id   | int64 | 健康提醒ID |

​	

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x09 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x53（固定值）       |
|              |      | xx   | JSON数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x89 | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x53（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

​	

## 0x0A - 预警功能

### 预警类型

#### 心率预警 - 0x01

参数表

| key    | type   | 描述                                                         | 属性 |
| ------ | ------ | ------------------------------------------------------------ | ---- |
| config | string | 心率预警配置："min,max,interval,period"<br />min - 心率预警最小值（0~255）<br />max - 心率预警最大值（0~255）<br />interval - 预警检测间隔（秒）<br />period - 预警周期（分钟） | 可选 |
| onoff  | bool   | 预警开关（false 关闭，true 开启）                            | 可选 |

> 参数说明：
>
> - **interval**
>
>   预警检测间隔，为每间隔 'interval' 的时长执行一次预警检测
>
> - **period**
>
>   预警周期，当检测到数据值不在预警范围内时，开始计时，若到达预警周期时长前，未检测到符合预警范围内的数据值，则触发预警；若到达预警周期时长前，检测到符合预警范围内的数据值，清除计时



#### 血氧预警 - 0x02

参数表

| key    | type   | 描述                                                         | 属性 |
| ------ | ------ | ------------------------------------------------------------ | ---- |
| config | string | 血氧预警配置："min,max,interval,period"<br />min - 血氧预警最小值（0~100）<br />max - 血氧预警最大值（0~100）<br />interval - 预警检测间隔（秒）<br />period - 预警周期（分钟） | 可选 |
| onoff  | bool   | 预警开关（false 关闭，true 开启）                            | 可选 |



#### 血压预警 - 0x03

参数表

| key    | type   | 描述                                                         | 属性 |
| ------ | ------ | ------------------------------------------------------------ | ---- |
| config | string | 血压预警配置：""sys_min,sys_max,dia_min,dia_max,interval,period"<br />sys_min - 收缩压预警最小值（0~255）<br />sys_max - 收缩压警最大值（0~255）<br />dia_min - 舒张压警最小值（0~255）<br />dia_max - 舒张压警最大值（0~255）<br />interval - 预警检测间隔（秒）<br />period - 预警周期（分钟） | 可选 |
| onoff  | bool   | 预警开关（false 关闭，true 开启）                            | 可选 |





### 设置预警

App请求

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x0A | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x01（固定值）       |
|              |      | 1    | 预警类型             |
|              |      | xx   | 预警配置数据（JSON） |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x8A | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x01（固定值） |
|              |      | 1    | 预警类型       |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

### 读取预警

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x0A | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x02（固定值） |
|              |      | 1    | 预警类型       |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x8A | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x02（固定值）       |
|              |      | 1    | 预警类型             |
|              |      | xx   | 预警配置数据（JSON） |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	





## 0x0B - 消息通知

### 通知类型

| 类型值 | 描述         |
| ------ | ------------ |
| 0      | 普通消息通知 |
| 101    | 告警消息通知 |
| 201    | 紧急消息通知 |



### 添加

参数表

| key       | type   | 描述                                               | 属性 |
| --------- | ------ | -------------------------------------------------- | ---- |
| id        | int64  | 通知唯一ID。(一般使用当前时间毫秒时间戳作为唯一ID) |      |
| timestamp | int64  | 通知的本地时间戳。                                 |      |
| type      | int    | 通知类型。                                         |      |
| title     | string | 通知标题。最大长度 **48Byte** (约为16个汉字)       |      |
| content   | string | 通知内容。最大长度 **320Byte** (约为106个汉字)     |      |
| duration  | int    | 通知持续时间（second）                             |      |
| expires   | int64  | 通知有效时间戳                                     | 可选 |

> duration - 通知持续时间为，通知弹窗保持时间，超时后弹窗将自动关闭
>
> expires - 通知有效时间，当设备本地时间大于通知有效时间时，通知将被自动删除



App请求

|              | 数据 | 长度 | 描述               |
| :----------: | ---- | ---- | ------------------ |
|   **帧头**   | 0x68 | 1    |                    |
|  **功能码**  | 0x0B | 1    |                    |
| **载荷长度** | xx   | 2    | 低字节先传         |
| **载荷实体** | xx   | 1    | 0x01（固定值）     |
|              |      | xx   | JSON数据，见参数表 |
|              |      | 1    | 0x00               |
|  **校验码**  | CS   | 1    |                    |
|   **帧尾**   | 0x16 | 1    |                    |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x8B | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x01（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

​	

### 删除

参数表

| key  | type  | 描述         |
| ---- | ----- | ------------ |
| id   | int64 | 通知唯一ID。 |

​	

App请求

|              | 数据 | 长度 | 描述               |
| :----------: | ---- | ---- | ------------------ |
|   **帧头**   | 0x68 | 1    |                    |
|  **功能码**  | 0x0B | 1    |                    |
| **载荷长度** | xx   | 2    | 低字节先传         |
| **载荷实体** | xx   | 1    | 0x02（固定值）     |
|              |      | xx   | JSON数据，见参数表 |
|              |      | 1    | 0x00               |
|  **校验码**  | CS   | 1    |                    |
|   **帧尾**   | 0x16 | 1    |                    |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x8B | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x02（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	



### 删除所有

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x0B | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x03（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x8B | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x03（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	





## 0x0C - 广播配置

### 日常广播配置

#### 设置

参数表

| key        | type | 描述                  |
| ---------- | ---- | --------------------- |
| 数据类型值 | bool | true 开启，false 关闭 |

> key值为**数据类型值**十六进制字符（数据类型列表见 **终端广播文档**）
> 设置 数据类型0x01 展示：{"01":true}
> 设置 数据类型0x01与 0x02 展示：{"01":true,"02":true}
>
> 注意：设置后将仅展示开启的类型数据，其他类型数据将隐藏，若同时开启的数据类型较多，总长度超出广播最大可容纳长度，部分类型数据将丢失，因此用户需合理配置展示的数据（最大可容纳长度见 **终端广播文档**）



App请求

|              | 数据 | 长度 | 描述               |
| :----------: | ---- | ---- | ------------------ |
|   **帧头**   | 0x68 | 1    |                    |
|  **功能码**  | 0x0C | 1    |                    |
| **载荷长度** | xx   | 2    | 低字节先传         |
| **载荷实体** | xx   | 1    | 0x11（固定值）     |
|              |      | xx   | JSON数据，见参数表 |
|              |      | 1    | 0x00               |
|  **校验码**  | CS   | 1    |                    |
|   **帧尾**   | 0x16 | 1    |                    |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x8C | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x11（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	



#### 读取

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x0C | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x12（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

参数表

| key        | type | 描述                  |
| ---------- | ---- | --------------------- |
| 数据类型值 | bool | true 开启，false 关闭 |

> 返回所有可配置的数据类型



终端响应

|              | 数据 | 长度 | 描述               |
| :----------: | ---- | ---- | ------------------ |
|   **帧头**   | 0x68 | 1    |                    |
|  **功能码**  | 0x8C | 1    |                    |
| **载荷长度** | xx   | 2    | 低字节先传         |
| **载荷实体** | xx   | 1    | 0x12（固定值）     |
|              |      | xx   | JSON数据，见参数表 |
|              |      | 1    | 0x00               |
|  **校验码**  | CS   | 1    |                    |
|   **帧尾**   | 0x16 | 1    |                    |

​	





## 0x17 - 历史数据

### 通用协议格式

App请求

|              | 数据 | 长度 | 描述                                                         |
| :----------: | ---- | ---- | ------------------------------------------------------------ |
|   **帧头**   | 0x68 | 1    |                                                              |
|  **功能码**  | 0x17 | 1    |                                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                                   |
| **载荷实体** | xx   | 1    | 历史数据类型                                                 |
|              |      | 3    | 获取时间格式：年月日（本地时间）。<br />[0]: 年 = 获取年份 - 2000，例：2024 - 2000 = 24<br />[1]: 月 1~12<br />[2]: 日 1~31 |
|              |      | 2    | 历史数据包索引值（起始值为 1），低字节先传                   |
|              |      | ...  | 历史数据包索引值（可选），可请求一个或多个索引数据包         |
|  **校验码**  | CS   | 1    |                                                              |
|   **帧尾**   | 0x16 | 1    |                                                              |

​	

终端响应

|              | 数据 | 长度 | 描述                                                         |
| :----------: | ---- | ---- | ------------------------------------------------------------ |
|   **帧头**   | 0x68 | 1    |                                                              |
|  **功能码**  | 0x97 | 1    |                                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                                   |
| **载荷实体** | xx   | 1    | 历史数据类型                                                 |
|              |      | 3    | 获取时间：年月日。<br />[0]: 年 = 获取年份 - 2000，例：2024 - 2000 = 24<br />[1]: 月 1~12<br />[2]: 日 1~31 |
|              |      | 2    | 历史数据包索引值，低字节先传                                 |
|              |      | 2    | 历史数据包总数（索引值无效时无后续数据）                     |
|              |      | xx   | 历史数据                                                     |
|  **校验码**  | CS   | 1    |                                                              |
|   **帧尾**   | 0x16 | 1    |                                                              |

异常响应

| 错误编码 | 编码含义                               |
| -------- | -------------------------------------- |
| 0xE1     | 不支持的数据类型                       |
| 0xE2     | 获取时间错误，不存在指定日期的历史数据 |

​	

​	

### 历史数据存储说明

历史数据存储是以时刻为单位进行存储的，因此如果要获取某个时刻的数据可以通过计算偏移去读取对应的数据包，然后取出该时刻的数据值。

示例：

- **5秒的心率数据存储**

  则存储时刻为 00:00:00, 00:00:05, 00:00:10, ..., 23:59:50, 23:59:55

- **5分钟的血氧数据存储**

  则存储时刻为 00:00:00, 00:05:00, 00:10:00, ..., 23:50:00, 23:55:00

- 以此类推

​	

注：历史数据在使用前应先判断数据是否有效，如 取心率数据，当某一段的心率数据值为 0xFF 时，则表示该时刻心率数据未记录，一般为未佩戴或关机导致的数据未记录。其他历史数据也是如此，若某历史数据的数据段为 nBytes（n = 1,2,3,4,...），则也应比较 nBytes 是否全为 0xFF 的值，若全为0xFF，则表示该时刻数据未记录

​	

​	

### 全天总数据 - 0x00

> 部分数据的全天累计总值

参数表

| key             | type | 描述                       |
| --------------- | ---- | -------------------------- |
| steps           | int  | 累计总步数                 |
| calories        | int  | 累计卡路里（Kcal）         |
| distance        | int  | 累计里程（meter）          |
| active_time     | int  | 累计活动时间（mintue）     |
| silent_time     | int  | 累计静止时间（mintue）     |
| active_calories | int  | 累计活动消耗卡路里（Kcal） |
| silent_calories | int  | 累计静止消耗卡路里（Kcal） |

​	

终端响应

|              | 数据 | 长度 | 描述                                      |
| :----------: | ---- | ---- | ----------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                           |
|  **功能码**  | 0x97 | 1    |                                           |
| **载荷长度** | xx   | 2    | 低字节先传                                |
| **载荷实体** | xx   | 1    | 0x00（固定值）                            |
|              |      | 3    | 获取时间：年月日。                        |
|              |      | 2    | 全天数据包索引值。                        |
|              |      | 2    | 全天数据包总数。                          |
|              |      | xx   | 全天数据，见[参数表](# 全天总数据 - 0x00) |
|              |      | 1    | 0x00                                      |
|  **校验码**  | CS   | 1    |                                           |
|   **帧尾**   | 0x16 | 1    |                                           |

​	

​	

### 全天心率 - 0x01

> 数据存储间隔为 5 秒

终端响应

|              | 数据 | 长度 | 描述               |
| :----------: | ---- | ---- | ------------------ |
|   **帧头**   | 0x68 | 1    |                    |
|  **功能码**  | 0x97 | 1    |                    |
| **载荷长度** | xx   | 2    | 低字节先传         |
| **载荷实体** | xx   | 1    | 0x01（固定值）     |
|              |      | 3    | 获取时间：年月日。 |
|              |      | 2    | 心率数据包索引值。 |
|              |      | 2    | 心率数据包总数。   |
|              |      | 1    | 1B 心率值          |
|              |      | 1    | 1B 心率值          |
|              |      | 1    | 1B 心率值          |
|              |      | ...  | ...                |
|  **校验码**  | CS   | 1    |                    |
|   **帧尾**   | 0x16 | 1    |                    |

​	

​	

### 全天计步 - 0x02

> 数据存储间隔为 5 分钟

终端响应

|              | 数据 | 长度 | 描述                           |
| :----------: | ---- | ---- | ------------------------------ |
|   **帧头**   | 0x68 | 1    |                                |
|  **功能码**  | 0x97 | 1    |                                |
| **载荷长度** | xx   | 2    | 低字节先传                     |
| **载荷实体** | xx   | 1    | 0x02（固定值）                 |
|              |      | 3    | 获取时间：年月日。             |
|              |      | 2    | 计步数据包索引值。             |
|              |      | 2    | 计步数据包总数。               |
|              |      | 2    | 2B 计步值（为5分钟内的累计值） |
|              |      | 2    | 2B 计步值                      |
|              |      | 2    | 2B 计步值                      |
|              |      | ...  | ...                            |
|  **校验码**  | CS   | 1    |                                |
|   **帧尾**   | 0x16 | 1    |                                |

​	

​	

​	

### 全天血氧 - 0x03

> 数据存储间隔为 5 分钟
>
> 注：需要开启[血氧连续监测](#0x02 - 参数设置与读取)功能才会有相应的历史数据

终端响应

|              | 数据 | 长度 | 描述                    |
| :----------: | ---- | ---- | ----------------------- |
|   **帧头**   | 0x68 | 1    |                         |
|  **功能码**  | 0x97 | 1    |                         |
| **载荷长度** | xx   | 2    | 低字节先传              |
| **载荷实体** | xx   | 1    | 0x03（固定值）          |
|              |      | 3    | 获取时间：年月日。      |
|              |      | 2    | 血氧数据包索引值。      |
|              |      | 2    | 血氧数据包总数。        |
|              |      | 1    | 1B 血氧值（血氧饱和度） |
|              |      | 1    | 1B 血氧值               |
|              |      | 1    | 1B 血氧值               |
|              |      | ...  | ...                     |
|  **校验码**  | CS   | 1    |                         |
|   **帧尾**   | 0x16 | 1    |                         |

​	

​	

### 全天RRI - 0x04

> 数据存储间隔为 5 秒

终端响应

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x97 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0x04（固定值）       |
|              |      | 3    | 获取时间：年月日。   |
|              |      | 2    | RRI数据包索引值。    |
|              |      | 2    | RRI数据包总数。      |
|              |      | 2    | 2B RRI值（单位：ms） |
|              |      | 2    | 2B RRI值             |
|              |      | 2    | 2B RRI值             |
|              |      | ...  | ...                  |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

​	

### 全天温度 - 0x05

> 数据存储间隔为 1 分钟

终端响应

|              | 数据 | 长度 | 描述                                  |
| :----------: | ---- | ---- | ------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                       |
|  **功能码**  | 0x97 | 1    |                                       |
| **载荷长度** | xx   | 2    | 低字节先传                            |
| **载荷实体** | xx   | 1    | 0x05（固定值）                        |
|              |      | 3    | 获取时间：年月日。                    |
|              |      | 2    | 温度数据包索引值。                    |
|              |      | 2    | 温度数据包总数。                      |
|              |      | 4    | 2B(体表温度 x100) + 2B(环境温度 x100) |
|              |      | 4    | 2B(体表温度 x100) + 2B(环境温度 x100) |
|              |      | 4    | 2B(体表温度 x100) + 2B(环境温度 x100) |
|              |      | ...  | ...                                   |
|  **校验码**  | CS   | 1    |                                       |
|   **帧尾**   | 0x16 | 1    |                                       |

> 注：2B温度数据为 int16 数据类型，转换时需注意符号位

​	

​	

### 全天气压 - 0x06

> 数据存储间隔为 1 分钟

终端响应

|              | 数据 | 长度 | 描述                  |
| :----------: | ---- | ---- | --------------------- |
|   **帧头**   | 0x68 | 1    |                       |
|  **功能码**  | 0x97 | 1    |                       |
| **载荷长度** | xx   | 2    | 低字节先传            |
| **载荷实体** | xx   | 1    | 0x06（固定值）        |
|              |      | 3    | 获取时间：年月日。    |
|              |      | 2    | 气压数据包索引值。    |
|              |      | 2    | 气压数据包总数。      |
|              |      | 4    | 4B 气压值（单位：Pa） |
|              |      | 4    | 4B 气压值             |
|              |      | 4    | 4B 气压值             |
|              |      | ...  | ...                   |
|  **校验码**  | CS   | 1    |                       |
|   **帧尾**   | 0x16 | 1    |                       |

​	

​	

### 全天血压 - 0x07

> 数据存储间隔为 5 分钟
>
> 注：需要开启[血压连续监测](#0x02 - 参数设置与读取)功能才会有相应的历史数据

终端响应

|              | 数据 | 长度 | 描述                    |
| :----------: | ---- | ---- | ----------------------- |
|   **帧头**   | 0x68 | 1    |                         |
|  **功能码**  | 0x97 | 1    |                         |
| **载荷长度** | xx   | 2    | 低字节先传              |
| **载荷实体** | xx   | 1    | 0x07（固定值）          |
|              |      | 3    | 获取时间：年月日。      |
|              |      | 2    | 血压数据包索引值。      |
|              |      | 2    | 血压数据包总数。        |
|              |      | 2    | 1B(收缩压) + 1B(舒张压) |
|              |      | 2    | 1B(收缩压) + 1B(舒张压) |
|              |      | 2    | 1B(收缩压) + 1B(舒张压) |
|              |      | ...  | ...                     |
|  **校验码**  | CS   | 1    |                         |
|   **帧尾**   | 0x16 | 1    |                         |

​	

​	

### 全天HRV - 0x08

> 数据存储间隔为 5 分钟
>
> 注：需要开启[HRV连续监测](#0x02 - 参数设置与读取)功能才会有相应的历史数据

终端响应

|              | 数据 | 长度 | 描述                                                         |
| :----------: | ---- | ---- | ------------------------------------------------------------ |
|   **帧头**   | 0x68 | 1    |                                                              |
|  **功能码**  | 0x97 | 1    |                                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                                   |
| **载荷实体** | xx   | 1    | 0x08（固定值）                                               |
|              |      | 3    | 获取时间：年月日。                                           |
|              |      | 2    | HRV数据包索引值。                                            |
|              |      | 2    | HRV数据包总数。                                              |
|              |      | 20   | 4B(SDNN x1000) + 4B(TP x1000) + 4B(LF x1000) + 4B(HF x1000) + 4B(VLF x1000) |
|              |      | 20   | 同上                                                         |
|              |      | 20   | 同上                                                         |
|              |      | ...  | ...                                                          |
|  **校验码**  | CS   | 1    |                                                              |
|   **帧尾**   | 0x16 | 1    |                                                              |

> 注：HRV计算结果需要通过服务器获取，具体查看服务器数据获取接口
>

​	

​	

### 全天位置数据 - 0x09

> 数据存储间隔为 5 分钟

数据表

|          | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| 类型     | 0 - 无效类型<br />1 - GPS定位<br />2 - NB基站定位<br />3 - CAT1基站定位 |
| 信号强度 | 定位信号强度百分比：0~100                                    |
| 经纬度   | 定位经纬度坐标，实际经纬度 = 4B(经纬度值) / 1e6              |

​	

终端响应

|              | 数据 | 长度 | 描述                                                         |
| :----------: | ---- | ---- | ------------------------------------------------------------ |
|   **帧头**   | 0x68 | 1    |                                                              |
|  **功能码**  | 0x97 | 1    |                                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                                   |
| **载荷实体** | xx   | 1    | 0x09（固定值）                                               |
|              |      | 3    | 获取时间：年月日。                                           |
|              |      | 2    | 位置数据包索引值。                                           |
|              |      | 2    | 位置数据包总数。                                             |
|              |      | 16   | 1B(类型) + 1B(信号强度) + 4B(经度 x1e6) + 4B(纬度 x1e6) + 6B(预留)，解析见 [数据表](# 全天位置数据 - 0x09) |
|              |      | 16   | 同上                                                         |
|              |      | 16   | 同上                                                         |
|              |      | ...  | ...                                                          |
|  **校验码**  | CS   | 1    |                                                              |
|   **帧尾**   | 0x16 | 1    |                                                              |

​	

​	

### 全天睡眠 - 0x0A

参数表

| key        | type | 描述                                       |
| ---------- | ---- | ------------------------------------------ |
| sober_time | int  | 清醒睡眠时间                               |
| light_time | int  | 浅睡眠时间                                 |
| deep_time  | int  | 深睡眠时间                                 |
| rem_time   | int  | 眼动睡眠时间                               |
| nap_time   | int  | 零星睡眠时间（非夜间睡眠时间，如：午睡等） |

​	

终端响应

|              | 数据 | 长度 | 描述                                    |
| :----------: | ---- | ---- | --------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                         |
|  **功能码**  | 0x97 | 1    |                                         |
| **载荷长度** | xx   | 2    | 低字节先传                              |
| **载荷实体** | xx   | 1    | 0x0A（固定值）                          |
|              |      | 3    | 获取时间：年月日。                      |
|              |      | 2    | 睡眠数据包索引值： 0                    |
|              |      | 2    | 睡眠数据包总数。                        |
|              |      | xx   | 睡眠数据，见[参数表](# 全天睡眠 - 0x0A) |
|              |      | 1    | 0x00                                    |
|  **校验码**  | CS   | 1    |                                         |
|   **帧尾**   | 0x16 | 1    |                                         |

> 当App请求的睡眠数据包索引值为 0 时，终端上传请求日期的睡眠统计数据，方便用户快速构建应用。
>
> 睡眠总时长 = sober_time + light_time + deep_time + rem_time
>
> 注：零星睡眠时长已包含在睡眠总时长中



终端响应

|              | 数据 | 长度 | 描述                                                         |
| :----------: | ---- | ---- | ------------------------------------------------------------ |
|   **帧头**   | 0x68 | 1    |                                                              |
|  **功能码**  | 0x97 | 1    |                                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                                   |
| **载荷实体** | xx   | 1    | 0x0A（固定值）                                               |
|              |      | 3    | 获取时间：年月日。                                           |
|              |      | 2    | 睡眠数据包索引值。                                           |
|              |      | 2    | 睡眠数据包总数。                                             |
|              |      | 4    | 1B(睡眠状态) + 3B(睡眠时刻)<br /><br />**睡眠状态**：0 清醒，1 浅睡，2 深睡，3 快速动眼<br />**睡眠时刻**：[0] 日期，[1] 小时，[2] 分钟  （进入该睡眠状态的时刻） |
|              |      | 4    | 同上                                                         |
|              |      | 4    | 同上                                                         |
|              |      | ...  | ...                                                          |
|  **校验码**  | CS   | 1    |                                                              |
|   **帧尾**   | 0x16 | 1    |                                                              |

> 默认夜间睡眠时间段为：22:00 ~ 10:00

```
示例: 请求今天的睡眠数据 2024-01-02

(为了方便理解, 这里以可视化的方式展示数据, 以下数据均为模拟数据)
[状态], [日期]-[时]:[分]
	1, 01-23:00		# 在 2024-01-01 23:00 进入睡眠,    状态: 浅睡
	2, 02-00:00		# 在 2024-01-02 00:00 睡眠状态改变, 状态: 深睡
	0, 02-01:00		# 在 2024-01-02 01:00 睡眠状态改变, 状态: 清醒
	1, 02-01:02		# 在 2024-01-02 01:02 睡眠状态改变, 状态: 浅睡
	2, 02-02:00		# 在 2024-01-02 02:00 睡眠状态改变, 状态: 深睡
	0, 02-09:30		# 在 2024-01-02 09:30 睡眠状态改变, 状态: 清醒
	
睡眠时间计算
清醒时间 = (02-01:02) - (02-01:00) = 2分钟
浅睡时间 = (02-00:00) - (01-23:00) +  (02-02:00) - (02-01:02)= 118分钟
深睡时间 = (02-01:00) - (02-00:00) +  (02-09:30) - (02-02:00)= 510分钟
眼动时间 = 0分钟
总睡眠时间 = 清醒时间 + 浅睡时间 + 深睡时间 + 眼动时间

注: 
1.如果某一段的清醒睡眠时间大于30分钟, 则认为已经醒来, 此段的时间则不应该记录到清醒时间统计中
2.睡眠历史数据中不会出现连续相同睡眠状态的数据
```

​	

​	

### 全天卡路里 - 0x0B

> 数据存储间隔为 5 分钟

终端响应

|              | 数据 | 长度 | 描述                                     |
| :----------: | ---- | ---- | ---------------------------------------- |
|   **帧头**   | 0x68 | 1    |                                          |
|  **功能码**  | 0x97 | 1    |                                          |
| **载荷长度** | xx   | 2    | 低字节先传                               |
| **载荷实体** | xx   | 1    | 0x0B（固定值）                           |
|              |      | 3    | 获取时间：年月日。                       |
|              |      | 2    | 卡路里数据包索引值。                     |
|              |      | 2    | 卡路里数据包总数。                       |
|              |      | 2    | 2B 卡路里值（Kcal）（为5分钟内的累计值） |
|              |      | 2    | 2B 卡路里值                              |
|              |      | 2    | 2B 卡路里值                              |
|              |      | ...  | ...                                      |
|  **校验码**  | CS   | 1    |                                          |
|   **帧尾**   | 0x16 | 1    |                                          |

​	

​	

### 全天数据包状态 - 0xFD

> 该指令用于获取全天数据包的状态，根据数据包的状态去选择性读取有效的数据

App请求

|              | 数据 | 长度 | 描述                                                         |
| :----------: | ---- | ---- | ------------------------------------------------------------ |
|   **帧头**   | 0x68 | 1    |                                                              |
|  **功能码**  | 0x17 | 1    |                                                              |
| **载荷长度** | xx   | 2    | 低字节先传                                                   |
| **载荷实体** | xx   | 1    | 0xFD                                                         |
|              |      | 1    | 全天数据包类型值                                             |
|              |      | 3    | 获取时间格式：年月日（本地时间）。<br />[0]: 年 = 获取年份 - 2000，例：2024 - 2000 = 24<br />[1]: 月 1~12<br />[2]: 日 1~31 |
|  **校验码**  | CS   | 1    |                                                              |
|   **帧尾**   | 0x16 | 1    |                                                              |

​	

终端响应

|              | 数据 | 长度 | 描述                |
| :----------: | ---- | ---- | ------------------- |
|   **帧头**   | 0x68 | 1    |                     |
|  **功能码**  | 0x97 | 1    |                     |
| **载荷长度** | xx   | 2    | 低字节先传          |
| **载荷实体** | xx   | 1    | 0xFD                |
|              |      | 1    | 全天数据包类型值    |
|              |      | 3    | 获取时间：年月日。  |
|              |      | 1    | 包索引（1）的状态值 |
|              |      | 1    | 包索引（2）的状态值 |
|              |      | 1    | 包索引（3）的状态值 |
|              |      | ...  | ...                 |
|  **校验码**  | CS   | 1    |                     |
|   **帧尾**   | 0x16 | 1    |                     |

> 数据包状态值表示当前数据包中有效数据的个数
>
> 示例：
> 0x00 - 表示当前数据包无有效数据
> 0x01 - 表示当前数据包有1个效数据
> 0x02 - 表示当前数据包有2个效数据
> 依此类推

​	

​	

### 历史存储信息 - 0xFE

App请求

|              | 数据 | 长度 | 描述       |
| :----------: | ---- | ---- | ---------- |
|   **帧头**   | 0x68 | 1    |            |
|  **功能码**  | 0x17 | 1    |            |
| **载荷长度** | xx   | 2    | 低字节先传 |
| **载荷实体** | xx   | 1    | 0xFE       |
|  **校验码**  | CS   | 1    |            |
|   **帧尾**   | 0x16 | 1    |            |

​	

参数表

| key    | type          | 描述                                                         |
| ------ | ------------- | ------------------------------------------------------------ |
| number | int           | 历史存储最大天数                                             |
| count  | int           | 已存储天数                                                   |
| dates  | array[string] | 已存储的日期列表<br />格式："yyyy-MM-dd"<br />示例：["2018-01-01","2018-01-02",...] |

终端响应

|              | 数据 | 长度 | 描述                 |
| :----------: | ---- | ---- | -------------------- |
|   **帧头**   | 0x68 | 1    |                      |
|  **功能码**  | 0x97 | 1    |                      |
| **载荷长度** | xx   | 2    | 低字节先传           |
| **载荷实体** | xx   | 1    | 0xFE                 |
|              |      | xx   | JSON数据，见上参数表 |
|              |      | 1    | 0x00                 |
|  **校验码**  | CS   | 1    |                      |
|   **帧尾**   | 0x16 | 1    |                      |

​	

​	

​	

## 0x1F - 设备控制

### 设备信息

参数表

| key         | type   | 描述                                              |
| ----------- | ------ | ------------------------------------------------- |
| name        | string | 设备名称                                          |
| mac         | string | 设备MAC地址："AA:BB:CC:DD:EE:FF"                  |
| version     | string | 设备版本："1.0.0" 或 "1.0.0.0"                    |
| version_tag | string | 设备版本标识（只有特殊版本才会包含该项）          |
| build_time  | string | Build时间："yyyyMMddThhmm"，示例："20240101T0830" |

​	

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x1F | 1    |                |
| **载荷长度** | 0    | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x01（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述                             |
| :----------: | ---- | ---- | -------------------------------- |
|   **帧头**   | 0x68 | 1    |                                  |
|  **功能码**  | 0x9F | 1    |                                  |
| **载荷长度** | xx   | 2    | 低字节先传                       |
| **载荷实体** | xx   | 1    | 0x01（固定值）                   |
|              |      | xx   | 设备信息，见[参数表](# 设备信息) |
|              |      | 1    | 0x00                             |
|  **校验码**  | CS   | 1    |                                  |
|   **帧尾**   | 0x16 | 1    |                                  |

​	

​	

### 恢复出厂设置

> 清除终端设备所有数据

App请求

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x1F | 1    |                |
| **载荷长度** | 0    | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x02（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	

终端响应

|              | 数据 | 长度 | 描述           |
| :----------: | ---- | ---- | -------------- |
|   **帧头**   | 0x68 | 1    |                |
|  **功能码**  | 0x9F | 1    |                |
| **载荷长度** | xx   | 2    | 低字节先传     |
| **载荷实体** | xx   | 1    | 0x02（固定值） |
|  **校验码**  | CS   | 1    |                |
|   **帧尾**   | 0x16 | 1    |                |

​	


